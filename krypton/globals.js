// Other global variables
var p_f = NaN;
var current_ma = NaN;


// Global chart variable
var coincidence_chart;
var coincidence_chart_B;
var fib_chart;

// Log Normal Standard Deviation
var sd = 0.35;

var mu_points = [
    // {'x': 0.1, 'y': 6.6786},
    // {'x': 0.2, 'y': 6.3911},
    // {'x': 0.3, 'y': 6.1039},
    // {'x': 0.4, 'y': 5.6978},
    // {'x': 0.5, 'y': 5.2983},
    // {'x': 0.6, 'y': 5.0067},
    // {'x': 0.7, 'y': 4.6111},
    // {'x': 0.8, 'y': 4.5041},
    // {'x': 0.9, 'y': 4.3881},
    // {'x': 1.0, 'y': 4.3222}
    {'x':0.1, 'y':7.128911139},
    {'x':0.2, 'y':6.806007509},
    {'x':0.3, 'y':6.55068836},
    {'x':0.4, 'y':6.212765957},
    {'x':0.5, 'y':5.994993742},
    {'x':0.6, 'y':5.634543179},
    {'x':0.7, 'y':5.394242804},
    {'x':0.8, 'y':5.296620776},
    {'x':0.9, 'y':5.01126408},
    {'x':1, 'y':4.943679599}
];

var sigma_points = [
    // {'x': 0.1, 'y': 0.2979},
    // {'x': 0.2, 'y': 0.2720},
    // {'x': 0.3, 'y': 0.2924},
    // {'x': 0.4, 'y': 0.3372},
    // {'x': 0.5, 'y': 0.4214},
    // {'x': 0.6, 'y': 0.3979},
    // {'x': 0.7, 'y': 0.3387},
    // {'x': 0.8, 'y': 0.3210},
    // {'x': 0.9, 'y': 0.2891},
    // {'x': 1.0, 'y': 0.2691}
    {'x':0.1, 'y':0.271356784},
    {'x':0.2, 'y':0.250251256},
    {'x':0.3, 'y':0.268341709},
    {'x':0.4, 'y':0.310552764},
    {'x':0.5, 'y':0.425125628},
    {'x':0.6, 'y':0.379899497},
    {'x':0.7, 'y':0.479396985},
    {'x':0.8, 'y':0.48241206},
    {'x':0.9, 'y':0.382914573},
    {'x':1, 'y':0.379899497}
];

var body_resistance_points = {
    "dry" : {
        "5" : [
            {"x" : 25, "y": 1750 },
            {"x" : 50, "y": 1375 },
            {"x" : 75, "y": 1125 },
            {"x" : 100, "y": 990 },
            {"x" : 125, "y": 900 },
            {"x" : 150, "y": 850 },
            {"x" : 175, "y": 825 },
            {"x" : 200, "y": 800 },
            {"x" : 225, "y": 775 },
            {"x" : 400, "y": 700 },
            {"x" : 500, "y": 625 },
            {"x" : 700, "y": 575 }
        ],
        "50" : [
            {"x" : 25, "y": 3250 },
            {"x" : 50, "y": 2500 },
            {"x" : 75, "y": 2000 },
            {"x" : 100, "y": 1725 },
            {"x" : 125, "y": 1550 },
            {"x" : 150, "y": 1400 },
            {"x" : 175, "y": 1325 },
            {"x" : 200, "y": 1275 },
            {"x" : 225, "y": 1225 },
            {"x" : 400, "y": 950 },
            {"x" : 500, "y": 850 },
            {"x" : 700, "y": 775 }
        ],
        "95" : [
            {"x" : 25, "y": 6100 },
            {"x" : 50, "y": 4600 },
            {"x" : 75, "y": 3600 },
            {"x" : 100, "y": 3125 },
            {"x" : 125, "y": 2675 },
            {"x" : 150, "y": 2350 },
            {"x" : 175, "y": 2175 },
            {"x" : 200, "y": 2050 },
            {"x" : 225, "y": 1900 },
            {"x" : 400, "y": 1275 },
            {"x" : 500, "y": 1150 },
            {"x" : 700, "y": 1050 }            
        ]
    },
    "wet" : {
        "5" : [
            {"x" : 25, "y": 1175 },
            {"x" : 50, "y": 1100 },
            {"x" : 75, "y": 1025 },
            {"x" : 100, "y": 975 },
            {"x" : 125, "y": 900 },
            {"x" : 150, "y": 850 },
            {"x" : 175, "y": 825 },
            {"x" : 200, "y": 800 },
            {"x" : 225, "y": 775 },
            {"x" : 400, "y": 700 },
            {"x" : 500, "y": 625 },
            {"x" : 700, "y": 575 }            
        ],
        "50" : [
            {"x" : 25, "y": 2175 },
            {"x" : 50, "y": 2000 },
            {"x" : 75, "y": 1825 },
            {"x" : 100, "y": 1675 },
            {"x" : 125, "y": 1550 },
            {"x" : 150, "y": 1400 },
            {"x" : 175, "y": 1325 },
            {"x" : 200, "y": 1275 },
            {"x" : 225, "y": 1225 },
            {"x" : 400, "y": 950 },
            {"x" : 500, "y": 850 },
            {"x" : 700, "y": 775 }            
        ],
        "95" : [
            {"x" : 25, "y": 4100 },
            {"x" : 50, "y": 3675 },
            {"x" : 75, "y": 3275 },
            {"x" : 100, "y": 2950 },
            {"x" : 125, "y": 2675 },
            {"x" : 150, "y": 2350 },
            {"x" : 175, "y": 2175 },
            {"x" : 200, "y": 2050 },
            {"x" : 225, "y": 1900 },
            {"x" : 400, "y": 1275 },
            {"x" : 500, "y": 1150 },
            {"x" : 700, "y": 1050 },            
        ]
    },
    "salt" : {
        "5" : [
            {"x" : 25, "y": 960 },
            {"x" : 50, "y": 940 },
            {"x" : 75, "y": 920 },
            {"x" : 100, "y": 880 },
            {"x" : 125, "y": 850 },
            {"x" : 150, "y": 830 },
            {"x" : 175, "y": 810 },
            {"x" : 200, "y": 790 },
            {"x" : 225, "y": 770 },
            {"x" : 400, "y": 700 },
            {"x" : 500, "y": 625 },
            {"x" : 700, "y": 575 }            
        ],
        "50" : [
            {"x" : 25, "y": 1300 },
            {"x" : 50, "y": 1275 },
            {"x" : 75, "y": 1250 },
            {"x" : 100, "y": 1225 },
            {"x" : 125, "y": 1200 },
            {"x" : 150, "y": 1180 },
            {"x" : 175, "y": 1155 },
            {"x" : 200, "y": 1135 },
            {"x" : 225, "y": 1115 },
            {"x" : 400, "y": 950 },
            {"x" : 500, "y": 850 },
            {"x" : 700, "y": 775 }            
        ],
        "95": [
            {"x" : 25, "y": 1755 },
            {"x" : 50, "y": 1720 },
            {"x" : 75, "y": 1685 },
            {"x" : 100, "y": 1655 },
            {"x" : 125, "y": 1620 },
            {"x" : 150, "y": 1590 },
            {"x" : 175, "y": 1560 },
            {"x" : 200, "y": 1530 },
            {"x" : 225, "y": 1505 },
            {"x" : 400, "y": 1275 },
            {"x" : 500, "y": 1150 },
            {"x" : 700, "y": 1050 }            
        ]
    }
}

var body_resistance_threshold = {
    "max" : {
        "dry" : {
            "5" : 1750,
            "50" : 3250, 
            "95" : 6100
        }, 
        "wet" : {
            "5" : 1175,
            "50" : 2175,
            "95" : 4100
        },
        "salt" : {
            "5" : 960,
            "50" : 1300,
            "95" : 1755
        }
    },
    "min" : {
        "5" : 575,
        "50" : 775,
        "95" : 1050
    }
}

// List of time steps
var time_list = [
    0.01,
    0.02,
    0.05,
    0.1,
    0.2,
    0.3,
    0.4,
    0.5,
    0.6,
    0.7,
    0.8,
    0.9,
    1
];


var gpr_data = [];
var gpr_data_valid = false;

var gpr_helptext = 'Copy two columns from Excel. The first column should contain the step voltage potential. The second column should contain the radial distance from the center of the structure. Click "Process" and confirm that the data is correct.'