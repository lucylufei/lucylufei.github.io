<!doctype html>
<html>

<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width initial-scale=1'>
    <title>may-log</title>
    <link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext'
        rel='stylesheet' type='text/css' />
    <style type='text/css'>
        html {
            overflow-x: initial !important;
        }

        :root {
            --node-fill: #ECECFF;
            --node-border: #CCCCFF;
            --cluster-fill: #ffffde;
            --cluster-border: #aaaa33;
            --note-fill: #fff5ad;
            --note-border: #aaaa33;
            --mermaid-color: var(--text-color);
        }

        .label {
            font-family: var(--mermaid-font-family);
            color: rgb(51, 51, 51);
        }

        .label text {
            fill: rgb(51, 51, 51);
        }

        .node rect,
        .node circle,
        .node ellipse,
        .node polygon {
            fill: var(--node-fill);
            stroke: rgb(147, 112, 219);
            stroke-width: 1px;
        }

        .node .label {
            text-align: center;
        }

        .node.clickable {
            cursor: pointer;
        }

        .arrowheadPath {
            fill: var(--text-color);
        }

        .edgePath .path {
            stroke: var(--text-color);
            stroke-width: 1.5px;
        }

        .edgeLabel {
            background-color: rgb(232, 232, 232);
            text-align: center;
        }

        .cluster rect {
            fill: var(--cluster-fill);
            stroke: var(--cluster-border);
            stroke-width: 1px;
        }

        .cluster text {
            fill: var(--text-color);
        }

        div.mermaidTooltip {
            position: absolute;
            text-align: center;
            max-width: 200px;
            padding: 2px;
            font-family: var(--mermaid-font-family);
            font-size: 12px;
            background: var(--cluster-fill);
            border: 1px solid var(--cluster-border);
            border-radius: 2px;
            pointer-events: none;
            z-index: 100;
        }

        .actor {
            stroke: var(--node-border);
            fill: var(--node-fill);
        }

        text.actor {
            fill: black;
            stroke: none;
        }

        .actor-line {
            stroke: grey;
        }

        .messageLine0 {
            stroke-width: 1.5;
            stroke: var(--text-color);
        }

        .messageLine1 {
            stroke-width: 1.5;
            stroke: var(--text-color);
        }

        #arrowhead {
            fill: var(--text-color);
        }

        .sequenceNumber {
            fill: white;
        }

        #sequencenumber {
            fill: var(--text-color);
        }

        #crosshead path {
            fill: var(--text-color) !important;
            stroke: var(--text-color) !important;
        }

        .messageText {
            fill: var(--text-color);
            stroke: none;
        }

        .labelBox {
            stroke: var(--node-border);
            fill: var(--node-fill);
        }

        .labelText {
            fill: black;
            stroke: none;
        }

        .loopText {
            fill: black;
            stroke: none;
        }

        .loopLine {
            stroke-width: 2;
            stroke: var(--node-border);
        }

        .note {
            stroke: var(--cluster-border);
            fill: rgb(255, 245, 173);
        }

        .noteText {
            fill: black;
            stroke: none;
            font-family: var(--mermaid-font-family);
            font-size: 14px;
        }

        .activation0 {
            fill: rgb(244, 244, 244);
            stroke: rgb(102, 102, 102);
        }

        .activation1 {
            fill: rgb(244, 244, 244);
            stroke: rgb(102, 102, 102);
        }

        .activation2 {
            fill: rgb(244, 244, 244);
            stroke: rgb(102, 102, 102);
        }

        .mermaid-main-font {
            font-family: var(--mermaid-font-family);
        }

        .section {
            stroke: none;
            opacity: 0.2;
        }

        .section0 {
            fill: rgba(102, 102, 255, 0.49);
        }

        .section2 {
            fill: rgb(255, 244, 0);
        }

        .section1,
        .section3 {
            fill: white;
            opacity: 0.2;
        }

        .sectionTitle0 {
            fill: var(--text-color);
        }

        .sectionTitle1 {
            fill: var(--text-color);
        }

        .sectionTitle2 {
            fill: var(--text-color);
        }

        .sectionTitle3 {
            fill: var(--text-color);
        }

        .sectionTitle {
            text-anchor: start;
            font-size: 11px;
            font-family: var(--mermaid-font-family);
        }

        .grid .tick {
            stroke: lightgrey;
            opacity: 0.3;
            shape-rendering: crispedges;
        }

        .grid .tick text {
            font-family: var(--mermaid-font-family);
        }

        .grid path {
            stroke-width: 0;
        }

        .today {
            fill: none;
            stroke: red;
            stroke-width: 2px;
        }

        .task {
            stroke-width: 2;
        }

        .taskText {
            text-anchor: middle;
            font-family: var(--mermaid-font-family);
        }

        .taskText:not([font-size]) {
            font-size: 11px;
        }

        .taskTextOutsideRight {
            fill: black;
            text-anchor: start;
            font-size: 11px;
            font-family: var(--mermaid-font-family);
        }

        .taskTextOutsideLeft {
            fill: black;
            text-anchor: end;
            font-size: 11px;
        }

        .task.clickable {
            cursor: pointer;
        }

        .taskText.clickable {
            cursor: pointer;
            font-weight: bold;
            fill: rgb(0, 49, 99) !important;
        }

        .taskTextOutsideLeft.clickable {
            cursor: pointer;
            font-weight: bold;
            fill: rgb(0, 49, 99) !important;
        }

        .taskTextOutsideRight.clickable {
            cursor: pointer;
            font-weight: bold;
            fill: rgb(0, 49, 99) !important;
        }

        .taskText0,
        .taskText1,
        .taskText2,
        .taskText3 {
            fill: white;
        }

        .task0,
        .task1,
        .task2,
        .task3 {
            fill: rgb(138, 144, 221);
            stroke: rgb(83, 79, 188);
        }

        .taskTextOutside0,
        .taskTextOutside2 {
            fill: black;
        }

        .taskTextOutside1,
        .taskTextOutside3 {
            fill: black;
        }

        .active0,
        .active1,
        .active2,
        .active3 {
            fill: rgb(191, 199, 255);
            stroke: rgb(83, 79, 188);
        }

        .activeText0,
        .activeText1,
        .activeText2,
        .activeText3 {
            fill: black !important;
        }

        .done0,
        .done1,
        .done2,
        .done3 {
            stroke: grey;
            fill: lightgrey;
            stroke-width: 2;
        }

        .doneText0,
        .doneText1,
        .doneText2,
        .doneText3 {
            fill: black !important;
        }

        .crit0,
        .crit1,
        .crit2,
        .crit3 {
            stroke: rgb(255, 136, 136);
            fill: red;
            stroke-width: 2;
        }

        .activeCrit0,
        .activeCrit1,
        .activeCrit2,
        .activeCrit3 {
            stroke: rgb(255, 136, 136);
            fill: rgb(191, 199, 255);
            stroke-width: 2;
        }

        .doneCrit0,
        .doneCrit1,
        .doneCrit2,
        .doneCrit3 {
            stroke: rgb(255, 136, 136);
            fill: lightgrey;
            stroke-width: 2;
            cursor: pointer;
            shape-rendering: crispedges;
        }

        .milestone {
            transform: rotate(45deg) scale(0.8, 0.8);
        }

        .milestoneText {
            font-style: italic;
        }

        .doneCritText0,
        .doneCritText1,
        .doneCritText2,
        .doneCritText3 {
            fill: black !important;
        }

        .activeCritText0,
        .activeCritText1,
        .activeCritText2,
        .activeCritText3 {
            fill: black !important;
        }

        .titleText {
            text-anchor: middle;
            font-size: 18px;
            fill: black;
            font-family: var(--mermaid-font-family);
        }

        g.classGroup text {
            fill: rgb(147, 112, 219);
            stroke: none;
            font-family: var(--mermaid-font-family);
            font-size: 10px;
        }

        g.classGroup text .title {
            font-weight: bolder;
        }

        g.classGroup rect {
            fill: var(--node-fill);
            stroke: rgb(147, 112, 219);
        }

        g.classGroup line {
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        .classLabel .box {
            stroke: none;
            stroke-width: 0;
            fill: var(--node-fill);
            opacity: 0.5;
        }

        .classLabel .label {
            fill: rgb(147, 112, 219);
            font-size: 10px;
        }

        .relation {
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
            fill: none;
        }

        #compositionStart {
            fill: rgb(147, 112, 219);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #compositionEnd {
            fill: rgb(147, 112, 219);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #aggregationStart {
            fill: var(--node-fill);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #aggregationEnd {
            fill: var(--node-fill);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #dependencyStart {
            fill: rgb(147, 112, 219);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #dependencyEnd {
            fill: rgb(147, 112, 219);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #extensionStart {
            fill: rgb(147, 112, 219);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        #extensionEnd {
            fill: rgb(147, 112, 219);
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        .commit-id,
        .commit-msg,
        .branch-label {
            fill: lightgrey;
            color: lightgrey;
            font-family: var(--mermaid-font-family);
        }

        .pieTitleText {
            text-anchor: middle;
            font-size: 25px;
            fill: var(--text-color);
            font-family: var(--mermaid-font-family);
        }

        .slice {
            font-family: var(--mermaid-font-family);
        }

        g.stateGroup text {
            fill: rgb(147, 112, 219);
            stroke: none;
            font-size: 10px;
            font-family: var(--mermaid-font-family);
        }

        g.stateGroup text {
            fill: rgb(147, 112, 219);
            stroke: none;
            font-size: 10px;
        }

        g.stateGroup .state-title {
            font-weight: bolder;
            fill: black;
        }

        g.stateGroup rect {
            fill: var(--node-fill);
            stroke: rgb(147, 112, 219);
        }

        g.stateGroup line {
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
        }

        .transition {
            stroke: rgb(147, 112, 219);
            stroke-width: 1;
            fill: none;
        }

        .stateGroup .composit {
            fill: white;
            border-bottom: 1px;
        }

        .state-note {
            stroke: var(--cluster-border);
            fill: rgb(255, 245, 173);
        }

        .state-note text {
            fill: black;
            stroke: none;
            font-size: 10px;
        }

        .stateLabel .box {
            stroke: none;
            stroke-width: 0;
            fill: var(--node-fill);
            opacity: 0.5;
        }

        .stateLabel text {
            fill: black;
            font-size: 10px;
            font-weight: bold;
            font-family: var(--mermaid-font-family);
        }

        .node text {
            font-size: 14px;
        }

        div.mermaidTooltip {
            position: absolute;
            text-align: center;
            max-width: 200px;
            padding: 2px;
            font-family: var(--mermaid-font-family);
            font-size: 12px;
            background: var(--cluster-fill);
            border: 1px solid var(--cluster-border);
            border-radius: 2px;
            pointer-events: none;
            z-index: 100;
        }

        #write .md-diagram-panel .md-diagram-panel-preview div {
            width: initial;
        }


        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --select-text-bg-color: #B5D6FC;
            --select-text-font-color: auto;
            --monospace: "Lucida Console", Consolas, "Courier", monospace;
        }

        html {
            font-size: 14px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        body {
            margin: 0px;
            padding: 0px;
            height: auto;
            bottom: 0px;
            top: 0px;
            left: 0px;
            right: 0px;
            font-size: 1rem;
            line-height: 1.42857;
            overflow-x: hidden;
            background: inherit;
            tab-size: 4;
        }

        iframe {
            margin: auto;
        }

        a.url {
            word-break: break-all;
        }

        a:active,
        a:hover {
            outline: 0px;
        }

        .in-text-selection,
        ::selection {
            text-shadow: none;
            background: var(--select-text-bg-color);
            color: var(--select-text-font-color);
        }

        #write {
            margin: 0px auto;
            height: auto;
            width: inherit;
            word-break: normal;
            overflow-wrap: break-word;
            position: relative;
            white-space: normal;
            overflow-x: visible;
            padding-top: 40px;
        }

        #write.first-line-indent p {
            text-indent: 2em;
        }

        #write.first-line-indent li p,
        #write.first-line-indent p * {
            text-indent: 0px;
        }

        #write.first-line-indent li {
            margin-left: 2em;
        }

        .for-image #write {
            padding-left: 8px;
            padding-right: 8px;
        }

        body.typora-export {
            padding-left: 30px;
            padding-right: 30px;
        }

        .typora-export .footnote-line,
        .typora-export li,
        .typora-export p {
            white-space: pre-wrap;
        }

        @media screen and (max-width: 500px) {
            body.typora-export {
                padding-left: 0px;
                padding-right: 0px;
            }

            #write {
                padding-left: 20px;
                padding-right: 20px;
            }

            .CodeMirror-sizer {
                margin-left: 0px !important;
            }

            .CodeMirror-gutters {
                display: none !important;
            }
        }

        #write li>figure:last-child {
            margin-bottom: 0.5rem;
        }

        #write ol,
        #write ul {
            position: relative;
        }

        img {
            max-width: 100%;
            vertical-align: middle;
        }

        button,
        input,
        select,
        textarea {
            color: inherit;
            font: inherit;
        }

        input[type="checkbox"],
        input[type="radio"] {
            line-height: normal;
            padding: 0px;
        }

        *,
        ::after,
        ::before {
            box-sizing: border-box;
        }

        #write h1,
        #write h2,
        #write h3,
        #write h4,
        #write h5,
        #write h6,
        #write p,
        #write pre {
            width: inherit;
        }

        #write h1,
        #write h2,
        #write h3,
        #write h4,
        #write h5,
        #write h6,
        #write p {
            position: relative;
        }

        p {
            line-height: inherit;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            break-after: avoid-page;
            break-inside: avoid;
            orphans: 4;
        }

        p {
            orphans: 4;
        }

        h1 {
            font-size: 2rem;
        }

        h2 {
            font-size: 1.8rem;
        }

        h3 {
            font-size: 1.6rem;
        }

        h4 {
            font-size: 1.4rem;
        }

        h5 {
            font-size: 1.2rem;
        }

        h6 {
            font-size: 1rem;
        }

        .md-math-block,
        .md-rawblock,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .hidden {
            display: none;
        }

        .md-blockmeta {
            color: rgb(204, 204, 204);
            font-weight: 700;
            font-style: italic;
        }

        a {
            cursor: pointer;
        }

        sup.md-footnote {
            padding: 2px 4px;
            background-color: rgba(238, 238, 238, 0.7);
            color: rgb(85, 85, 85);
            border-radius: 4px;
            cursor: pointer;
        }

        sup.md-footnote a,
        sup.md-footnote a:hover {
            color: inherit;
            text-transform: inherit;
            text-decoration: inherit;
        }

        #write input[type="checkbox"] {
            cursor: pointer;
            width: inherit;
            height: inherit;
        }

        figure {
            overflow-x: auto;
            margin: 1.2em 0px;
            max-width: calc(100% + 16px);
            padding: 0px;
        }

        figure>table {
            margin: 0px !important;
        }

        tr {
            break-inside: avoid;
            break-after: auto;
        }

        thead {
            display: table-header-group;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0px;
            width: 100%;
            overflow: auto;
            break-inside: auto;
            text-align: left;
        }

        table.md-table td {
            min-width: 32px;
        }

        .CodeMirror-gutters {
            border-right: 0px;
            background-color: inherit;
        }

        .CodeMirror-linenumber {
            user-select: none;
        }

        .CodeMirror {
            text-align: left;
        }

        .CodeMirror-placeholder {
            opacity: 0.3;
        }

        .CodeMirror pre {
            padding: 0px 4px;
        }

        .CodeMirror-lines {
            padding: 0px;
        }

        div.hr:focus {
            cursor: none;
        }

        #write pre {
            white-space: pre-wrap;
        }

        #write.fences-no-line-wrapping pre {
            white-space: pre;
        }

        #write pre.ty-contain-cm {
            white-space: normal;
        }

        .CodeMirror-gutters {
            margin-right: 4px;
        }

        .md-fences {
            font-size: 0.9rem;
            display: block;
            break-inside: avoid;
            text-align: left;
            overflow: visible;
            white-space: pre;
            background: inherit;
            position: relative !important;
        }

        .md-diagram-panel {
            width: 100%;
            margin-top: 10px;
            text-align: center;
            padding-top: 0px;
            padding-bottom: 8px;
            overflow-x: auto;
        }

        #write .md-fences.mock-cm {
            white-space: pre-wrap;
        }

        .md-fences.md-fences-with-lineno {
            padding-left: 0px;
        }

        #write.fences-no-line-wrapping .md-fences.mock-cm {
            white-space: pre;
            overflow-x: auto;
        }

        .md-fences.mock-cm.md-fences-with-lineno {
            padding-left: 8px;
        }

        .CodeMirror-line,
        twitterwidget {
            break-inside: avoid;
        }

        .footnotes {
            opacity: 0.8;
            font-size: 0.9rem;
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .footnotes+.footnotes {
            margin-top: 0px;
        }

        .md-reset {
            margin: 0px;
            padding: 0px;
            border: 0px;
            outline: 0px;
            vertical-align: top;
            background: 0px 0px;
            text-decoration: none;
            text-shadow: none;
            float: none;
            position: static;
            width: auto;
            height: auto;
            white-space: nowrap;
            cursor: inherit;
            -webkit-tap-highlight-color: transparent;
            line-height: normal;
            font-weight: 400;
            text-align: left;
            box-sizing: content-box;
            direction: ltr;
        }

        li div {
            padding-top: 0px;
        }

        blockquote {
            margin: 1rem 0px;
        }

        li .mathjax-block,
        li p {
            margin: 0.5rem 0px;
        }

        li {
            margin: 0px;
            position: relative;
        }

        blockquote> :last-child {
            margin-bottom: 0px;
        }

        blockquote> :first-child,
        li> :first-child {
            margin-top: 0px;
        }

        .footnotes-area {
            color: rgb(136, 136, 136);
            margin-top: 0.714rem;
            padding-bottom: 0.143rem;
            white-space: normal;
        }

        #write .footnote-line {
            white-space: pre-wrap;
        }

        @media print {

            body,
            html {
                border: 1px solid transparent;
                height: 99%;
                break-after: avoid;
                break-before: avoid;
                font-variant-ligatures: no-common-ligatures;
            }

            #write {
                margin-top: 0px;
                padding-top: 0px;
                border-color: transparent !important;
            }

            .typora-export * {
                -webkit-print-color-adjust: exact;
            }

            html.blink-to-pdf {
                font-size: 13px;
            }

            .typora-export #write {
                padding-left: 32px;
                padding-right: 32px;
                padding-bottom: 0px;
                break-after: avoid;
            }

            .typora-export #write::after {
                height: 0px;
            }
        }

        .footnote-line {
            margin-top: 0.714em;
            font-size: 0.7em;
        }

        a img,
        img a {
            cursor: pointer;
        }

        pre.md-meta-block {
            font-size: 0.8rem;
            min-height: 0.8rem;
            white-space: pre-wrap;
            background: rgb(204, 204, 204);
            display: block;
            overflow-x: hidden;
        }

        p>.md-image:only-child:not(.md-img-error) img,
        p>img:only-child {
            display: block;
            margin: auto;
        }

        #write.first-line-indent p>.md-image:only-child:not(.md-img-error) img {
            left: -2em;
            position: relative;
        }

        p>.md-image:only-child {
            display: inline-block;
            width: 100%;
        }

        #write .MathJax_Display {
            margin: 0.8em 0px 0px;
        }

        .md-math-block {
            width: 100%;
        }

        .md-math-block:not(:empty)::after {
            display: none;
        }

        [contenteditable="true"]:active,
        [contenteditable="true"]:focus,
        [contenteditable="false"]:active,
        [contenteditable="false"]:focus {
            outline: 0px;
            box-shadow: none;
        }

        .md-task-list-item {
            position: relative;
            list-style-type: none;
        }

        .task-list-item.md-task-list-item {
            padding-left: 0px;
        }

        .md-task-list-item>input {
            position: absolute;
            top: 0px;
            left: 0px;
            margin-left: -1.2em;
            margin-top: calc(1em - 10px);
            border: none;
        }

        .math {
            font-size: 1rem;
        }

        .md-toc {
            height: 100vh;
            position: fixed;
            left: 3em;
            overflow-y: scroll;
            font-size: 0.9rem;
            border-radius: 10px;
        }

        .md-toc-content {
            position: relative;
            margin-left: 0px;
        }

        .md-toc-content::after,
        .md-toc::after {
            display: none;
        }

        .md-toc-item {
            display: block;
            color: rgb(65, 131, 196);
        }

        .md-toc-item a {
            text-decoration: none;
        }

        .md-toc-inner:hover {
            text-decoration: underline;
        }

        .md-toc-inner {
            display: inline-block;
            cursor: pointer;
        }

        .md-toc-h1 .md-toc-inner {
            margin-left: 0px;
            font-weight: 700;
        }

        .md-toc-h2 .md-toc-inner {
            margin-left: 2em;
        }

        .md-toc-h3 .md-toc-inner {
            margin-left: 4em;
        }

        .md-toc-h4 .md-toc-inner {
            margin-left: 6em;
        }

        .md-toc-h5 .md-toc-inner {
            margin-left: 8em;
        }

        .md-toc-h6 .md-toc-inner {
            margin-left: 10em;
        }

        @media screen and (max-width: 48em) {
            .md-toc-h3 .md-toc-inner {
                margin-left: 3.5em;
            }

            .md-toc-h4 .md-toc-inner {
                margin-left: 5em;
            }

            .md-toc-h5 .md-toc-inner {
                margin-left: 6.5em;
            }

            .md-toc-h6 .md-toc-inner {
                margin-left: 8em;
            }
        }

        a.md-toc-inner {
            font-size: inherit;
            font-style: inherit;
            font-weight: inherit;
            line-height: inherit;
        }

        .footnote-line a:not(.reversefootnote) {
            color: inherit;
        }

        .md-attr {
            display: none;
        }

        .md-fn-count::after {
            content: ".";
        }

        code,
        pre,
        samp,
        tt {
            font-family: var(--monospace);
        }

        kbd {
            margin: 0px 0.1em;
            padding: 0.1em 0.6em;
            font-size: 0.8em;
            color: rgb(36, 39, 41);
            background: rgb(255, 255, 255);
            border: 1px solid rgb(173, 179, 185);
            border-radius: 3px;
            box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset;
            white-space: nowrap;
            vertical-align: middle;
        }

        .md-comment {
            color: rgb(162, 127, 3);
            opacity: 0.8;
            font-family: var(--monospace);
        }

        code {
            text-align: left;
            vertical-align: initial;
        }

        a.md-print-anchor {
            white-space: pre !important;
            border-width: initial !important;
            border-style: none !important;
            border-color: initial !important;
            display: inline-block !important;
            position: absolute !important;
            width: 1px !important;
            right: 0px !important;
            outline: 0px !important;
            background: 0px 0px !important;
            text-decoration: initial !important;
            text-shadow: initial !important;
        }

        .md-inline-math .MathJax_SVG .noError {
            display: none !important;
        }

        .html-for-mac .inline-math-svg .MathJax_SVG {
            vertical-align: 0.2px;
        }

        .md-math-block .MathJax_SVG_Display {
            text-align: center;
            margin: 0px;
            position: relative;
            text-indent: 0px;
            max-width: none;
            max-height: none;
            min-height: 0px;
            min-width: 100%;
            width: auto;
            overflow-y: hidden;
            display: block !important;
        }

        .MathJax_SVG_Display,
        .md-inline-math .MathJax_SVG_Display {
            width: auto;
            margin: inherit;
            display: inline-block !important;
        }

        .MathJax_SVG .MJX-monospace {
            font-family: var(--monospace);
        }

        .MathJax_SVG .MJX-sans-serif {
            font-family: sans-serif;
        }

        .MathJax_SVG {
            display: inline;
            font-style: normal;
            font-weight: 400;
            line-height: normal;
            zoom: 90%;
            text-indent: 0px;
            text-align: left;
            text-transform: none;
            letter-spacing: normal;
            word-spacing: normal;
            overflow-wrap: normal;
            white-space: nowrap;
            float: none;
            direction: ltr;
            max-width: none;
            max-height: none;
            min-width: 0px;
            min-height: 0px;
            border: 0px;
            padding: 0px;
            margin: 0px;
        }

        .MathJax_SVG * {
            transition: none 0s ease 0s;
        }

        .MathJax_SVG_Display svg {
            vertical-align: middle !important;
            margin-bottom: 0px !important;
            margin-top: 0px !important;
        }

        .os-windows.monocolor-emoji .md-emoji {
            font-family: "Segoe UI Symbol", sans-serif;
        }

        .md-diagram-panel>svg {
            max-width: 100%;
        }

        [lang="flow"] svg,
        [lang="mermaid"] svg {
            max-width: 100%;
            height: auto;
        }

        [lang="mermaid"] .node text {
            font-size: 1rem;
        }

        table tr th {
            border-bottom: 0px;
        }

        video {
            max-width: 100%;
            display: block;
            margin: 0px auto;
        }

        iframe {
            max-width: 100%;
            width: 100%;
            border: none;
        }

        .highlight td,
        .highlight tr {
            border: 0px;
        }

        svg[id^="mermaidChart"] {
            line-height: 1em;
        }

        mark {
            background: rgb(255, 255, 0);
            color: rgb(0, 0, 0);
        }

        .md-html-inline .md-plain,
        .md-html-inline strong,
        mark .md-inline-math,
        mark strong {
            color: inherit;
        }

        mark .md-meta {
            color: rgb(0, 0, 0);
            opacity: 0.3 !important;
        }


        .CodeMirror {
            height: auto;
        }

        .CodeMirror.cm-s-inner {
            background: inherit;
        }

        .CodeMirror-scroll {
            overflow: auto hidden;
            z-index: 3;
        }

        .CodeMirror-gutter-filler,
        .CodeMirror-scrollbar-filler {
            background-color: rgb(255, 255, 255);
        }

        .CodeMirror-gutters {
            border-right: 1px solid rgb(221, 221, 221);
            background: inherit;
            white-space: nowrap;
        }

        .CodeMirror-linenumber {
            padding: 0px 3px 0px 5px;
            text-align: right;
            color: rgb(153, 153, 153);
        }

        .cm-s-inner .cm-keyword {
            color: rgb(119, 0, 136);
        }

        .cm-s-inner .cm-atom,
        .cm-s-inner.cm-atom {
            color: rgb(34, 17, 153);
        }

        .cm-s-inner .cm-number {
            color: rgb(17, 102, 68);
        }

        .cm-s-inner .cm-def {
            color: rgb(0, 0, 255);
        }

        .cm-s-inner .cm-variable {
            color: rgb(0, 0, 0);
        }

        .cm-s-inner .cm-variable-2 {
            color: rgb(0, 85, 170);
        }

        .cm-s-inner .cm-variable-3 {
            color: rgb(0, 136, 85);
        }

        .cm-s-inner .cm-string {
            color: rgb(170, 17, 17);
        }

        .cm-s-inner .cm-property {
            color: rgb(0, 0, 0);
        }

        .cm-s-inner .cm-operator {
            color: rgb(152, 26, 26);
        }

        .cm-s-inner .cm-comment,
        .cm-s-inner.cm-comment {
            color: rgb(170, 85, 0);
        }

        .cm-s-inner .cm-string-2 {
            color: rgb(255, 85, 0);
        }

        .cm-s-inner .cm-meta {
            color: rgb(85, 85, 85);
        }

        .cm-s-inner .cm-qualifier {
            color: rgb(85, 85, 85);
        }

        .cm-s-inner .cm-builtin {
            color: rgb(51, 0, 170);
        }

        .cm-s-inner .cm-bracket {
            color: rgb(153, 153, 119);
        }

        .cm-s-inner .cm-tag {
            color: rgb(17, 119, 0);
        }

        .cm-s-inner .cm-attribute {
            color: rgb(0, 0, 204);
        }

        .cm-s-inner .cm-header,
        .cm-s-inner.cm-header {
            color: rgb(0, 0, 255);
        }

        .cm-s-inner .cm-quote,
        .cm-s-inner.cm-quote {
            color: rgb(0, 153, 0);
        }

        .cm-s-inner .cm-hr,
        .cm-s-inner.cm-hr {
            color: rgb(153, 153, 153);
        }

        .cm-s-inner .cm-link,
        .cm-s-inner.cm-link {
            color: rgb(0, 0, 204);
        }

        .cm-negative {
            color: rgb(221, 68, 68);
        }

        .cm-positive {
            color: rgb(34, 153, 34);
        }

        .cm-header,
        .cm-strong {
            font-weight: 700;
        }

        .cm-del {
            text-decoration: line-through;
        }

        .cm-em {
            font-style: italic;
        }

        .cm-link {
            text-decoration: underline;
        }

        .cm-error {
            color: red;
        }

        .cm-invalidchar {
            color: red;
        }

        .cm-constant {
            color: rgb(38, 139, 210);
        }

        .cm-defined {
            color: rgb(181, 137, 0);
        }

        div.CodeMirror span.CodeMirror-matchingbracket {
            color: rgb(0, 255, 0);
        }

        div.CodeMirror span.CodeMirror-nonmatchingbracket {
            color: rgb(255, 34, 34);
        }

        .cm-s-inner .CodeMirror-activeline-background {
            background: inherit;
        }

        .CodeMirror {
            position: relative;
            overflow: hidden;
        }

        .CodeMirror-scroll {
            height: 100%;
            outline: 0px;
            position: relative;
            box-sizing: content-box;
            background: inherit;
        }

        .CodeMirror-sizer {
            position: relative;
        }

        .CodeMirror-gutter-filler,
        .CodeMirror-hscrollbar,
        .CodeMirror-scrollbar-filler,
        .CodeMirror-vscrollbar {
            position: absolute;
            z-index: 6;
            display: none;
        }

        .CodeMirror-vscrollbar {
            right: 0px;
            top: 0px;
            overflow: hidden;
        }

        .CodeMirror-hscrollbar {
            bottom: 0px;
            left: 0px;
            overflow: hidden;
        }

        .CodeMirror-scrollbar-filler {
            right: 0px;
            bottom: 0px;
        }

        .CodeMirror-gutter-filler {
            left: 0px;
            bottom: 0px;
        }

        .CodeMirror-gutters {
            position: absolute;
            left: 0px;
            top: 0px;
            padding-bottom: 30px;
            z-index: 3;
        }

        .CodeMirror-gutter {
            white-space: normal;
            height: 100%;
            box-sizing: content-box;
            padding-bottom: 30px;
            margin-bottom: -32px;
            display: inline-block;
        }

        .CodeMirror-gutter-wrapper {
            position: absolute;
            z-index: 4;
            background: 0px 0px !important;
            border: none !important;
        }

        .CodeMirror-gutter-background {
            position: absolute;
            top: 0px;
            bottom: 0px;
            z-index: 4;
        }

        .CodeMirror-gutter-elt {
            position: absolute;
            cursor: default;
            z-index: 4;
        }

        .CodeMirror-lines {
            cursor: text;
        }

        .CodeMirror pre {
            border-radius: 0px;
            border-width: 0px;
            background: 0px 0px;
            font-family: inherit;
            font-size: inherit;
            margin: 0px;
            white-space: pre;
            overflow-wrap: normal;
            color: inherit;
            z-index: 2;
            position: relative;
            overflow: visible;
        }

        .CodeMirror-wrap pre {
            overflow-wrap: break-word;
            white-space: pre-wrap;
            word-break: normal;
        }

        .CodeMirror-code pre {
            border-right: 30px solid transparent;
            width: fit-content;
        }

        .CodeMirror-wrap .CodeMirror-code pre {
            border-right: none;
            width: auto;
        }

        .CodeMirror-linebackground {
            position: absolute;
            left: 0px;
            right: 0px;
            top: 0px;
            bottom: 0px;
            z-index: 0;
        }

        .CodeMirror-linewidget {
            position: relative;
            z-index: 2;
            overflow: auto;
        }

        .CodeMirror-wrap .CodeMirror-scroll {
            overflow-x: hidden;
        }

        .CodeMirror-measure {
            position: absolute;
            width: 100%;
            height: 0px;
            overflow: hidden;
            visibility: hidden;
        }

        .CodeMirror-measure pre {
            position: static;
        }

        .CodeMirror div.CodeMirror-cursor {
            position: absolute;
            visibility: hidden;
            border-right: none;
            width: 0px;
        }

        .CodeMirror div.CodeMirror-cursor {
            visibility: hidden;
        }

        .CodeMirror-focused div.CodeMirror-cursor {
            visibility: inherit;
        }

        .cm-searching {
            background: rgba(255, 255, 0, 0.4);
        }

        @media print {
            .CodeMirror div.CodeMirror-cursor {
                visibility: hidden;
            }
        }


        :root {
            --side-bar-bg-color: #fafafa;
            --control-text-color: #777;
        }

        @include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

        html {
            font-size: 16px;
        }

        body {
            font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
            color: rgb(51, 51, 51);
            line-height: 1.6;
        }

        #write {
            max-width: 860px;
            margin: 0 auto;
            padding: 30px;
            padding-bottom: 100px;
            padding-left: 30vw;
        }

        @media only screen and (min-width: 1400px) {
            #write {
                max-width: 1024px;
            }
        }

        @media only screen and (min-width: 1800px) {
            #write {
                max-width: 1200px;
            }
        }

        #write>ul:first-child,
        #write>ol:first-child {
            margin-top: 30px;
        }

        a {
            color: #4183C4;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            position: relative;
            margin-top: 1rem;
            margin-bottom: 1rem;
            font-weight: bold;
            line-height: 1.4;
            cursor: text;
        }

        h1:hover a.anchor,
        h2:hover a.anchor,
        h3:hover a.anchor,
        h4:hover a.anchor,
        h5:hover a.anchor,
        h6:hover a.anchor {
            text-decoration: none;
        }

        h1 tt,
        h1 code {
            font-size: inherit;
        }

        h2 tt,
        h2 code {
            font-size: inherit;
        }

        h3 tt,
        h3 code {
            font-size: inherit;
        }

        h4 tt,
        h4 code {
            font-size: inherit;
        }

        h5 tt,
        h5 code {
            font-size: inherit;
        }

        h6 tt,
        h6 code {
            font-size: inherit;
        }

        h1 {
            padding-bottom: .3em;
            font-size: 2.25em;
            line-height: 1.2;
            border-bottom: 1px solid #eee;
        }

        h2 {
            padding-bottom: .3em;
            font-size: 1.75em;
            line-height: 1.225;
            border-bottom: 1px solid #eee;
        }

        h3 {
            font-size: 1.5em;
            line-height: 1.43;
        }

        h4 {
            font-size: 1.25em;
        }

        h5 {
            font-size: 1em;
        }

        h6 {
            font-size: 1em;
            color: #777;
        }

        p,
        blockquote,
        ul,
        ol,
        dl,
        table {
            margin: 0.8em 0;
        }

        li>ol,
        li>ul {
            margin: 0 0;
        }

        hr {
            height: 2px;
            padding: 0;
            margin: 16px 0;
            background-color: #e7e7e7;
            border: 0 none;
            overflow: hidden;
            box-sizing: content-box;
        }

        li p.first {
            display: inline-block;
        }

        ul,
        ol {
            padding-left: 30px;
        }

        ul:first-child,
        ol:first-child {
            margin-top: 0;
        }

        ul:last-child,
        ol:last-child {
            margin-bottom: 0;
        }

        blockquote {
            border-left: 4px solid #dfe2e5;
            padding: 0 15px;
            color: #777777;
        }

        blockquote blockquote {
            padding-right: 0;
        }

        table {
            padding: 0;
            word-break: initial;
        }

        table tr {
            border-top: 1px solid #dfe2e5;
            margin: 0;
            padding: 0;
        }

        table tr:nth-child(2n),
        thead {
            background-color: #f8f8f8;
        }

        table tr th {
            font-weight: bold;
            border: 1px solid #dfe2e5;
            border-bottom: 0;
            margin: 0;
            padding: 6px 13px;
        }

        table tr td {
            border: 1px solid #dfe2e5;
            margin: 0;
            padding: 6px 13px;
        }

        table tr th:first-child,
        table tr td:first-child {
            margin-top: 0;
        }

        table tr th:last-child,
        table tr td:last-child {
            margin-bottom: 0;
        }

        .CodeMirror-lines {
            padding-left: 4px;
        }

        .code-tooltip {
            box-shadow: 0 1px 1px 0 rgba(0, 28, 36, .3);
            border-top: 1px solid #eef2f2;
        }

        .md-fences,
        code,
        tt {
            border: 1px solid #e7eaed;
            background-color: #f8f8f8;
            border-radius: 3px;
            padding: 0;
            padding: 2px 4px 0px 4px;
            font-size: 0.9em;
        }

        code {
            background-color: #f3f4f4;
            padding: 0 2px 0 2px;
        }

        .md-fences {
            margin-bottom: 15px;
            margin-top: 15px;
            padding-top: 8px;
            padding-bottom: 6px;
        }


        .md-task-list-item>input {
            margin-left: -1.3em;
        }

        @media print {
            html {
                font-size: 13px;
            }

            table,
            pre {
                page-break-inside: avoid;
            }

            pre {
                word-wrap: break-word;
            }
        }

        .md-fences {
            background-color: #f8f8f8;
        }

        #write pre.md-meta-block {
            padding: 1rem;
            font-size: 85%;
            line-height: 1.45;
            background-color: #f7f7f7;
            border: 0;
            border-radius: 3px;
            color: #777777;
            margin-top: 0 !important;
        }

        .mathjax-block>.code-tooltip {
            bottom: .375rem;
        }

        .md-mathjax-midline {
            background: #fafafa;
        }

        #write>h3.md-focus:before {
            left: -1.5625rem;
            top: .375rem;
        }

        #write>h4.md-focus:before {
            left: -1.5625rem;
            top: .285714286rem;
        }

        #write>h5.md-focus:before {
            left: -1.5625rem;
            top: .285714286rem;
        }

        #write>h6.md-focus:before {
            left: -1.5625rem;
            top: .285714286rem;
        }

        .md-image>.md-meta {
            /*border: 1px solid #ddd;*/
            border-radius: 3px;
            padding: 2px 0px 0px 4px;
            font-size: 0.9em;
            color: inherit;
        }

        .md-tag {
            color: #a7a7a7;
            opacity: 1;
        }

        .md-toc {
            margin-top: 20px;
            padding-bottom: 20px;
        }

        .sidebar-tabs {
            border-bottom: none;
        }

        #typora-quick-open {
            border: 1px solid #ddd;
            background-color: #f8f8f8;
        }

        #typora-quick-open-item {
            background-color: #FAFAFA;
            border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
            border-style: solid;
            border-width: 1px;
        }

        /** focus mode */
        .on-focus-mode blockquote {
            border-left-color: rgba(85, 85, 85, 0.12);
        }

        header,
        .context-menu,
        .megamenu-content,
        footer {
            font-family: "Segoe UI", "Arial", sans-serif;
        }

        .file-node-content:hover .file-node-icon,
        .file-node-content:hover .file-node-open-state {
            visibility: visible;
        }

        .mac-seamless-mode #typora-sidebar {
            background-color: #fafafa;
            background-color: var(--side-bar-bg-color);
        }

        .md-lang {
            color: #b4654d;
        }

        .html-for-mac .context-menu {
            --item-hover-bg-color: #E6F0FE;
        }

        #md-notification .btn {
            border: 0;
        }

        .dropdown-menu .divider {
            border-color: #e5e5e5;
        }

        .ty-preferences .window-content {
            background-color: #fafafa;
        }

        .ty-preferences .nav-group-item.active {
            color: white;
            background: #999;
        }

        .typora-export li,
        .typora-export p,
        .typora-export,
        .footnote-line {
            white-space: normal;
        }
    </style>
</head>

<body class='typora-export os-windows'>
    <div id='write' class='is-node'>
        <div class='md-toc' mdtype='toc'>
            <p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1"
                    data-ref="n2001"><a class="md-toc-inner" href="#phd-may">Ph.D. May</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n2"><a class="md-toc-inner"
                        href="#meeting-1---may-8">Meeting #1 - May 8</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n3"><a class="md-toc-inner"
                        href="#topics">Topics:</a></span><span role="listitem" class="md-toc-item md-toc-h4"
                    data-ref="n18"><a class="md-toc-inner" href="#notes">Notes</a></span><span role="listitem"
                    class="md-toc-item md-toc-h3" data-ref="n76"><a class="md-toc-inner"
                        href="#timeline">Timeline</a></span><span role="listitem" class="md-toc-item md-toc-h3"
                    data-ref="n81"><a class="md-toc-inner" href="#c-notes">C++ Notes</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n82"><a class="md-toc-inner"
                        href="#references-vs-pointers">References vs. Pointers</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n90"><a class="md-toc-inner"
                        href="#class">Class</a></span><span role="listitem" class="md-toc-item md-toc-h3"
                    data-ref="n117"><a class="md-toc-inner" href="#emerald">Emerald</a></span><span role="listitem"
                    class="md-toc-item md-toc-h3" data-ref="n133"><a class="md-toc-inner"
                        href="#opengl">OpenGL</a></span><span role="listitem" class="md-toc-item md-toc-h3"
                    data-ref="n138"><a class="md-toc-inner" href="#gpgpu-sim">GPGPU-Sim</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n148"><a class="md-toc-inner"
                        href="#instructions">Instructions</a></span><span role="listitem" class="md-toc-item md-toc-h4"
                    data-ref="n162"><a class="md-toc-inner" href="#memory">Memory</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n235"><a class="md-toc-inner"
                        href="#interconnect">Interconnect</a></span><span role="listitem" class="md-toc-item md-toc-h3"
                    data-ref="n249"><a class="md-toc-inner" href="#gpgpu-sim-code-details">GPGPU-Sim Code
                        Details</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n251"><a
                        class="md-toc-inner" href="#ptx-emulator"><strong>PTX Emulator</strong></a></span><span
                    role="listitem" class="md-toc-item md-toc-h4" data-ref="n257"><a class="md-toc-inner"
                        href="#timing-model"><strong>Timing Model</strong></a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n263"><a class="md-toc-inner"
                        href="#power-model"><strong>Power Model</strong></a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n269"><a class="md-toc-inner"
                        href="#interface-to-cuda"><strong>Interface to CUDA</strong></a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n273"><a class="md-toc-inner" href="#file-structure">File
                        Structure</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n278"><a
                        class="md-toc-inner" href="#starting-the-simulation-startup">Starting the Simulation
                        (startup)</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n309"><a
                        class="md-toc-inner" href="#ptx">PTX</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n324"><a class="md-toc-inner" href="#stream-manager">Stream
                        Manager</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n329"><a
                        class="md-toc-inner" href="#functional-simulator">Functional Simulator</a></span><span
                    role="listitem" class="md-toc-item md-toc-h4" data-ref="n373"><a class="md-toc-inner"
                        href="#timing-model-n373">Timing Model</a></span><span role="listitem"
                    class="md-toc-item md-toc-h3" data-ref="n449"><a class="md-toc-inner" href="#ray-tracing-papers">Ray
                        Tracing Papers</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n450"><a
                        class="md-toc-inner" href="#understanding-the-efficiency-of-ray-traversal-on-gpus">Understanding
                        the Efficiency of Ray Traversal on GPUs</a></span><span role="listitem"
                    class="md-toc-item md-toc-h3" data-ref="n469"><a class="md-toc-inner"
                        href="#francois-thesis-notes">Francois Thesis Notes</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n477"><a class="md-toc-inner" href="#the-rtao-benchmark">The
                        RTAO Benchmark</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n498"><a
                        class="md-toc-inner" href="#status-report---may-14">Status Report - May 14</a></span><span
                    role="listitem" class="md-toc-item md-toc-h2" data-ref="n516"><a class="md-toc-inner"
                        href="#ray-tracing-meeting-1---may-15">Ray Tracing Meeting #1 - May 15</a></span><span
                    role="listitem" class="md-toc-item md-toc-h4" data-ref="n517"><a class="md-toc-inner"
                        href="#notes-n517">Notes</a></span><span role="listitem" class="md-toc-item md-toc-h4"
                    data-ref="n522"><a class="md-toc-inner" href="#tasks">Tasks</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n583"><a class="md-toc-inner"
                        href="#meeting-2---may-15">Meeting #2 - May 15</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n601"><a class="md-toc-inner"
                        href="#notes-n601">Notes</a></span><span role="listitem" class="md-toc-item md-toc-h3"
                    data-ref="n654"><a class="md-toc-inner" href="#arch">ARCH</a></span><span role="listitem"
                    class="md-toc-item md-toc-h3" data-ref="n667"><a class="md-toc-inner"
                        href="#notes-n667">Notes</a></span><span role="listitem" class="md-toc-item md-toc-h4"
                    data-ref="n668"><a class="md-toc-inner" href="#tlb---translation-lookaside-buffer">TLB -
                        <strong>Translation Lookaside Buffer</strong></a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n678"><a class="md-toc-inner"
                        href="#scratchpad-memory">Scratchpad Memory</a></span><span role="listitem"
                    class="md-toc-item md-toc-h4" data-ref="n686"><a class="md-toc-inner" href="#shared-memory">Shared
                        Memory</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n697"><a
                        class="md-toc-inner" href="#status-report---may-21">Status Report - May 21</a></span><span
                    role="listitem" class="md-toc-item md-toc-h2" data-ref="n718"><a class="md-toc-inner"
                        href="#ray-tracing-meeting-2---may-22">Ray Tracing Meeting #2 - May 22</a></span><span
                    role="listitem" class="md-toc-item md-toc-h3" data-ref="n765"><a class="md-toc-inner"
                        href="#ptx-memory-consistency">PTX Memory Consistency</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n819"><a class="md-toc-inner"
                        href="#meeting-3---may-22">Meeting #3 - May 22</a></span><span role="listitem"
                    class="md-toc-item md-toc-h3" data-ref="n891"><a class="md-toc-inner" href="#vulkan-notes">Vulkan
                        Notes</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n921"><a
                        class="md-toc-inner" href="#plan">Plan</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n1063"><a class="md-toc-inner"
                        href="#status-report---may-28">Status Report - May 28</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n1083"><a class="md-toc-inner"
                        href="#huawei-meeting---may-28">Huawei Meeting - May 28</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n1146"><a class="md-toc-inner"
                        href="#meeting-4---may-29">Meeting #4 - May 29</a></span><span role="listitem"
                    class="md-toc-item md-toc-h2" data-ref="n1210"><a class="md-toc-inner"
                        href="#emerald-n1210">Emerald</a></span><span role="listitem" class="md-toc-item md-toc-h3"
                    data-ref="n1261"><a class="md-toc-inner" href="#mesa">Mesa</a></span></p>
        </div>
        <p>&nbsp;</p>
        <h1><a name="phd-may" class="md-header-anchor"></a><span>Ph.D. May</span></h1>
        <h2><a name="meeting-1---may-8" class="md-header-anchor"></a><span>Meeting #1 - May 8</span></h2>
        <h4><a name="topics" class="md-header-anchor"></a><span>Topics:</span></h4>
        <ul>
            <li><span>Subject area</span></li>
            <li><strong><span>Supervisory committee</span></strong></li>
            <li><span>Recommended readings</span></li>
            <li><strong><span>Registering for courses</span></strong></li>
            <li><span>Upcoming deadlines, applications</span></li>
            <li><span>Source of funding?</span></li>
        </ul>
        <p>&nbsp;</p>
        <h4><a name="notes" class="md-header-anchor"></a><span>Notes</span></h4>
        <p><span>Possible projects:</span></p>
        <figure>
            <table>
                <thead>
                    <tr>
                        <th><span>Topic</span></th>
                        <th><span>People</span></th>
                        <th><span>Notes</span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span>Ray Tracing</span></td>
                        <td><span>Tommy + Mohammadreza</span></td>
                        <td><span>Huawei Project</span><br><span>* Possibly improving benchmarks</span><br><span>*
                                Possibly incorporating machine learning</span></td>
                    </tr>
                    <tr>
                        <td><span>Compilers</span></td>
                        <td>&nbsp;</td>
                        <td><span>Huawei Project</span><br><span>Ideally for mobile GPU applications</span></td>
                    </tr>
                    <tr>
                        <td><span>Energy Efficient</span></td>
                        <td>&nbsp;</td>
                        <td><span>Free project, in the direction of creating new GPU, sounds a lot like Guy&#39;s
                                project.</span></td>
                    </tr>
                    <tr>
                        <td><span>Machine Learning</span></td>
                        <td><span>Dave</span></td>
                        <td><span>COHESA Project</span><br><span>Mostly focused on training because it&#39;s unexplored
                                and requires more in depth knowledge</span></td>
                    </tr>
                </tbody>
            </table>
        </figure>
        <p><span>Courses:</span></p>
        <ul>
            <li><span>CPSC 540 - Machine Learning, need permission from department. Ask Aamir and Negar how they took
                    it</span></li>
            <li><span>CPEN 411, CPEN 511 - Must-haves</span></li>
            <li><span>Ideally a compilers course</span></li>
            <li><span>CAD course by Steve Wilton, stuff on Quartus</span></li>
            <li><span>Quantum Computing if offered</span></li>
            <li><span>Accelerators course with Tor if he decides to do it</span></li>
        </ul>
        <blockquote>
            <p><span>You may take graduate or undergraduate courses that are outside your own graduate program. You will
                    need approval in advance from:</span></p>
            <ul>
                <li><span>your supervisor</span></li>
                <li><span>your home program&#39;s graduate advisor</span></li>
                <li><span>the course instructor</span></li>
            </ul>
            <p><a href='https://www.grad.ubc.ca/current-students/managing-your-program/courses-outside-students-graduate-program'
                    target='_blank'
                    class='url'>https://www.grad.ubc.ca/current-students/managing-your-program/courses-outside-students-graduate-program</a>
            </p>
        </blockquote>
        <p><strong><span>To Do</span></strong><span>:</span></p>
        <ul>
            <li><span>Read Francois&#39;s thesis</span></li>
            <li><span>Read about Emerald, GPGPU-sim, rasterization</span></li>
            <li><span>Read Tommy&#39;s status updates</span></li>
            <li><span>Figure out timeline</span></li>
        </ul>
        <p>&nbsp;</p>
        <h3><a name="timeline" class="md-header-anchor"></a><span>Timeline</span></h3>
        <blockquote>
            <p><strong><span>Should advance to candidacy within 2 years, and must within 3 years</span></strong></p>
            <p><a href='https://www.grad.ubc.ca/current-students/professional-development/graduate-game-plan'
                    target='_blank'
                    class='url'>https://www.grad.ubc.ca/current-students/professional-development/graduate-game-plan</a>
            </p>
        </blockquote>
        <p><a href='http://www.ece.ubc.ca/policies-and-procedures/phd-degree/program-requirements-phd' target='_blank'
                class='url'>http://www.ece.ubc.ca/policies-and-procedures/phd-degree/program-requirements-phd</a></p>
        <h3><a name="c-notes" class="md-header-anchor"></a><span>C++ Notes</span></h3>
        <h4><a name="references-vs-pointers" class="md-header-anchor"></a><span>References vs. Pointers</span></h4>
        <ul>
            <li><span>References are the same as pointers</span></li>
            <li><code>int&amp; reference</code><span> and </span><code>int* pointer</code></li>
            <li><span>Reference is unique to its variable and must be assigned a value, pointers point to a memory space
                    and can be dynamically allocated and updated</span></li>
        </ul>
        <h4><a name="class" class="md-header-anchor"></a><span>Class</span></h4>
        <ul>
            <li>
                <p><code>private:</code><span> </span></p>
                <p><span>variables that can only be changed by functions inside the class, not from outside</span></p>
            </li>
            <li>
                <p><code>static</code></p>
                <p><span>common value that&#39;s shared between all instances of the class</span></p>
                <p><span>can also be functions </span><code>static int getFunction() { return staticVariable }</code>
                </p>
                <p><span>referred to with colons </span><code>int className::variableName</code></p>
            </li>
            <li>
                <p><code>public:</code></p>
                <p><span>available from outside of the class</span></p>
            </li>
            <li>
                <p><span>Constructor, Destructor</span></p>
                <p><span>Used when creating/deleting the object </span><code>nameofClass()</code><span> and
                    </span><code>~nameofClass()</code></p>
            </li>
            <li>
                <p><span>Can assign attributes from one class to another</span></p>
                <p><code>class A : public B{</code></p>
                <p><code>}</code></p>
            </li>
            <li>
                <p><code>virtual</code><span> tag indicates it can be overwritten by inner classes</span></p>
            </li>
            <li>
                <p><code>Class *pointer = new Class</code></p>
            </li>
            <li>
                <p><code>friend</code><span> allows access to private and public data</span></p>
            </li>
        </ul>
        <p>&nbsp;</p>
        <h3><a name="emerald" class="md-header-anchor"></a><span>Emerald</span></h3>
        <p><span>Emerald -&gt; OpenGL shaders on GPGPU-sim, integrated with gem5 and Android</span></p>
        <p><span>Gem5 -&gt; open-source system-level and processor simulator</span></p>
        <p><span>gem5-gpu adds GPGPU model but does not support graphics (built with gem5 and gpgpu-sim)</span></p>
        <p><span>apitrace - traces OpenGL API calls</span></p>
        <p><span>Mesa - open-source software implementation of OpenGL (bridges software to hardware)</span></p>
        <p><span>Trace-driven vs Execution driven:</span></p>
        <ul>
            <li><span>Trace </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> capture trace on real machine and read into
                    simulator</span>
            </li>
            <li><span>Execution </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> executes an emulated ISA benchmark</span>
            </li>
        </ul>
        <p><span>Mixed IMR/TBR (Immediate Mode / Tile-Based Rendering)</span></p>
        <ul>
            <li><span>Tile-Based is more suitable for mobile applications, divides the screen into tiles</span></li>
        </ul>
        <h3><a name="opengl" class="md-header-anchor"></a><span>OpenGL</span></h3>
        <p><strong><span>Vertex Shader</span></strong><span> - map triangle points</span></p>
        <p><strong><span>Primitive Assembly</span></strong><span> - draw triangles</span></p>
        <p><strong><span>Rasterizations</span></strong><span> - smooth lines</span></p>
        <p><strong><span>Fragment Shader</span></strong><span> - colour triangles</span></p>
        <h3><a name="gpgpu-sim" class="md-header-anchor"></a><span>GPGPU-Sim</span></h3>
        <ul>
            <li><span>Linux</span></li>
            <li><span>CUDA</span></li>
            <li><span>Does not require physical GPU</span></li>
        </ul>
        <p><strong><span>AerialVision</span></strong><span> for plotting</span></p>
        <p><span>A </span><em><span>kernel</span></em><span> is a grid of blocks of warps of threads. Thread blocks
                (</span><strong><span>CTA</span></strong><span>s) contain up to 1024 threads, and grouped into warps of
            </span><strong><span>32</span></strong><span> by the hardware. Each </span><em><span>thread
                    warp</span></em><span> contains a </span><strong><span>common PC</span></strong><span> and
            </span><em><span>scalar threads</span></em><span> that run the same instructions on many data. </span></p>
        <h4><a name="instructions" class="md-header-anchor"></a><span>Instructions</span></h4>
        <p><span>Select a warp and issue an instruction from its I-Buffer (based on scheduler)</span></p>
        <ol start=''>
            <li><span>Functional execution </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> determines what the instruction does</span>
            </li>
            <li><span>Use functional result in timing model</span></li>
            <li><span>Coalesce memory simulators</span></li>
            <li><span>Reserve output register in scoreboard</span></li>
            <li><span>If branch, update SIMT stack (control flow)</span></li>
        </ol>
        <p><strong><span>Scoreboard</span></strong><span> - Checks for dependencies/hazards </span></p>
        <h4><a name="memory" class="md-header-anchor"></a><span>Memory</span></h4>
        <p><span>Data Cache, Texture Cache, Shared Memory (Scratchpad), Const. Cache</span></p>
        <p><em><span>will stall if multiple reads to the same bank (location)</span></em></p>
        <ul>
            <li><span>Constant Cache - Read-only cache for constant memory, 1 read port (configurable)</span></li>
            <li><span>Texture Cache - important when no L1 cache, more relevant for graphics than GP, exploits access
                    pattern common to shading pixels</span></li>
            <li><span>Shared Memory - explicitly managed scratchpad, each SIMT core has its own, allows interactions
                    between threads, 32 banks</span></li>
        </ul>
        <p>&nbsp;</p>
        <p><strong><span>AGU</span></strong><span> - Address generation unit</span></p>
        <p><strong><span>Global Memory</span></strong><span> - off-chip DRAM</span></p>
        <ul>
            <li>
                <p><span>Accessed by memory partition</span></p>
            </li>
            <li>
                <p><span>Goes through interconnect, then memory partition, then off-chip</span></p>
            </li>
            <li>
                <p><span>With L1 -&gt; accessed in cache lines</span></p>
                <p><span>Without L1 -&gt; coalesce to 32 bytes</span></p>
            </li>
            <li>
                <p><span>128 byte cache lines grouped in 32 byte sectors </span></p>
            </li>
        </ul>
        <p><strong><span>L1 Cache</span></strong></p>
        <ul>
            <li><span>Local - write back, Global - write evict</span></li>
            <li><span>Non-coherent</span></li>
            <li><span>Single port 128 byte </span></li>
        </ul>
        <p><strong><span>Missing Access</span></strong></p>
        <ul>
            <li>
                <p><span>Miss Status Holding Registers (MSHR) </span></p>
                <p><span>Keep track of outstanding memory requests, if already missed, future requests do not need to go
                        to DRAM</span></p>
                <p><span>Each cache has its MSHR</span></p>
            </li>
        </ul>
        <p><strong><span>Atomic Operations</span></strong></p>
        <ul>
            <li><span>Read Modify Write instructions (i.e. atomic add) on a single memory location</span></li>
            <li><span>Coalesced between threads </span></li>
        </ul>
        <p><strong><span>SIMT</span></strong></p>
        <p><span>2 instructions/fetch to 2 warp schedulers (odd/even)</span></p>
        <p><em><span>Injection Port Buffer</span></em><span> groups multiple SIMT cores to a single access to the
                interconnect. </span><em><span>Response FIFO</span></em><span> receives results from the interconnect to
                distribute to SIMT cores</span></p>
        <p><strong><span>Memory Address Mapping</span></strong></p>
        <ul>
            <li>
                <p><span>Successive 256 byte regions of memory are assigned to successive memory partitions</span></p>
            </li>
            <li>
                <p><span>Each memory partition has its own DRAM controller</span></p>
            </li>
            <li>
                <p><span>Memory partitions can be accessed concurrently</span></p>
            </li>
            <li>
                <p><span>1 bank of L2 cache per memory partition</span></p>
            </li>
            <li>
                <p><span>ROP (raster operations) specific to graphics, adds additional delay in GPGPU</span></p>
                <ul>
                    <li><span>Attempts to do common computations at the L2 level without returning to the core</span>
                    </li>
                </ul>
            </li>
        </ul>
        <p><strong><span>L2 Cache</span></strong></p>
        <ul>
            <li><span>Write-back policy</span></li>
            <li><span>All memcpy goes through L2</span></li>
        </ul>
        <p><strong><span>DRAM</span></strong></p>
        <ul>
            <li><span>DRAM has non-uniform access latencies</span></li>
            <li><span>Configurable FIFO vs OoO</span></li>
        </ul>
        <h4><a name="interconnect" class="md-header-anchor"></a><span>Interconnect</span></h4>
        <p><strong><span>Clock Domains</span></strong></p>
        <ul>
            <li><span>SIMT Core</span></li>
            <li><span>Interconnect</span></li>
            <li><span>L2</span></li>
            <li><span>DRAM (Based on GDDR timing)</span></li>
        </ul>
        <p><span>Buffers at clock boundaries</span></p>
        <p><span>Uses Intersim/Booksim, controls topologies, routing, flow control, etc. </span></p>
        <p><span>Simulate two separate networks to avoid deadlocks (SIMT to mem, mem to SIMT)</span></p>
        <h3><a name="gpgpu-sim-code-details" class="md-header-anchor"></a><span>GPGPU-Sim Code Details</span></h3>
        <div class="md-diagram-panel"><svg id="mermaidChart10" width="100%" xmlns="http://www.w3.org/2000/svg"
                style="max-width: 314.26560974121094px;" viewBox="0 0 314.26560974121094 382.640625">
                <style>
                    :root {
                        --mermaid-font-family: sans-serif
                    }

                    :root {
                        --mermaid-alt-font-family: sans-serif
                    }
                </style>
                <style></style>
                <g transform="translate(-12, -12)">
                    <g class="output">
                        <g class="clusters"></g>
                        <g class="edgePaths">
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M185.4101448059082,53.328125L185.4101448059082,78.328125L185.4101448059082,103.328125"
                                    marker-end="url(#arrowhead417)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead417" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M185.4101448059082,136.65625L185.4101448059082,161.65625L185.4101448059082,186.65625"
                                    marker-end="url(#arrowhead418)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead418" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M150.5868490259531,219.984375L98.34374237060547,244.984375L98.34374237060547,269.984375"
                                    marker-end="url(#arrowhead419)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead419" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M220.23344058586332,219.984375L272.47654724121094,244.984375L272.47654724121094,269.984375"
                                    marker-end="url(#arrowhead420)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead420" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M272.47654724121094,303.3125L272.47654724121094,328.3125L272.47654724121094,353.3125"
                                    marker-end="url(#arrowhead421)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead421" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                        </g>
                        <g class="edgeLabels">
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="nodes">
                            <g class="node" id="A" transform="translate(185.4101448059082,36.6640625)"
                                style="opacity: 1;">
                                <rect rx="5" ry="5" x="-58.34375" y="-16.6640625" width="116.6875" height="33.328125">
                                </rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-48.34375,-6.6640625)">
                                        <foreignObject width="96.69140625" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                CUDA API Library</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="B" transform="translate(185.4101448059082,119.9921875)"
                                style="opacity: 1;">
                                <rect rx="5" ry="5" x="-72.6875" y="-16.6640625" width="145.375" height="33.328125">
                                </rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-62.6875,-6.6640625)">
                                        <foreignObject width="125.37890625" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                GPGPU-Sim Entrypoint</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="E" transform="translate(185.4101448059082,203.3203125)"
                                style="opacity: 1;">
                                <rect rx="5" ry="5" x="-61.6796875" y="-16.6640625" width="123.359375"
                                    height="33.328125"></rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-51.6796875,-6.6640625)">
                                        <foreignObject width="103.359375" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                Abstract HW Model</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="C" transform="translate(98.34374237060547,286.6484375)"
                                style="opacity: 1;">
                                <rect rx="5" ry="5" x="-78.34375" y="-16.6640625" width="156.6875" height="33.328125">
                                </rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-68.34375,-6.6640625)">
                                        <foreignObject width="136.69140625" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                PTX Emulator CUDA-Sim</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="D" transform="translate(272.47654724121094,286.6484375)"
                                style="opacity: 1;">
                                <rect rx="5" ry="5" x="-45.7890625" y="-16.6640625" width="91.578125"
                                    height="33.328125"></rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-35.7890625,-6.6640625)">
                                        <foreignObject width="71.58984375" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                Timing Model</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="F" transform="translate(272.47654724121094,369.9765625)"
                                style="opacity: 1;">
                                <rect rx="5" ry="5" x="-45.015625" y="-16.6640625" width="90.03125" height="33.328125">
                                </rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-35.015625,-6.6640625)">
                                        <foreignObject width="70.0390625" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                Power Model</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </svg></div>
        <h4><a name="ptx-emulator" class="md-header-anchor"></a><strong><span>PTX Emulator</span></strong></h4>
        <ul>
            <li><span>RISC like ISA, well documented, functional simulations</span></li>
            <li><span>Simulator gets functional results through GPGPU-Sim entrypoint + PTX Emulator (this is the pure
                    functional mode)</span></li>
        </ul>
        <h4><a name="timing-model" class="md-header-anchor"></a><strong><span>Timing Model</span></strong></h4>
        <ul>
            <li><span>Calculates number of cycles to run a piece of code</span></li>
            <li><span>Determines statistics (cache hits, miss, etc.)</span></li>
        </ul>
        <h4><a name="power-model" class="md-header-anchor"></a><strong><span>Power Model</span></strong></h4>
        <ul>
            <li><span>GPUWattch </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> based on Wattch, published ISCA 2013, implementation
                    to model energy consumption</span>
            </li>
            <li><span>Uses timing model results (i.e. register accesses, L1 access, DRAM access, etc.) and calculates
                    energy + scaling factors to make the numbers more realistic</span></li>
        </ul>
        <h4><a name="interface-to-cuda" class="md-header-anchor"></a><strong><span>Interface to CUDA</span></strong>
        </h4>
        <p><code>cudart</code><span> CUDA run time </span><span class="MathJax_SVG" tabindex="-1"
                style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                    style="vertical-align: -0.238ex;">
                    <defs>
                        <path stroke-width="0" id="E16-MJMAIN-2192"
                            d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                        </path>
                    </defs>
                    <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                        <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                    </g>
                </svg></span>
            <script type="math/tex">\rightarrow</script><span> </span><code>--cudart shared</code><span> (NVCC command)
                ensures that the linker does not statically link the executable to the hardware GPU. </span>
        </p>
        <p><span>CPU code related to the executable is run on the CPU that is running GPGPU-Sim. CPU is not simulated.
                GPGPU-Sim only models the GPU. Some integrations of gem5 + GPGPU-Sim</span></p>
        <p><code>libcudart.so</code><span> points towards real CUDA runtime library or GPGPU-Sim based on
            </span><code>LD_LIBRARY_PATH</code><span>. Not all the functions have been implemented in GPGPU-Sim. </span>
        </p>
        <h4><a name="file-structure" class="md-header-anchor"></a><span>File Structure</span></h4>
        <div class="md-diagram-panel"><svg id="mermaidChart11" width="100%" xmlns="http://www.w3.org/2000/svg"
                style="max-width: 318.71875px;" viewBox="0 0 318.71875 132.65625">
                <style>
                    :root {
                        --mermaid-font-family: sans-serif
                    }

                    :root {
                        --mermaid-alt-font-family: sans-serif
                    }
                </style>
                <style></style>
                <g transform="translate(-12, -12)">
                    <g class="output">
                        <g class="clusters"></g>
                        <g class="edgePaths">
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M145.0078125,48.70034722222222L58.0078125,78.328125L58.0078125,103.328125"
                                    marker-end="url(#arrowhead430)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead430" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M180.3515625,53.328125L180.3515625,78.328125L180.3515625,103.328125"
                                    marker-end="url(#arrowhead431)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead431" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                            <g class="edgePath" style="opacity: 1;">
                                <path class="path"
                                    d="M215.6953125,49.65518654369701L293.703125,78.328125L293.703125,103.328125"
                                    marker-end="url(#arrowhead432)" style="fill:none"></path>
                                <defs>
                                    <marker id="arrowhead432" viewBox="0 0 10 10" refX="9" refY="5"
                                        markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                            style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                    </marker>
                                </defs>
                            </g>
                        </g>
                        <g class="edgeLabels">
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                            <g class="edgeLabel" transform="" style="opacity: 1;">
                                <g transform="translate(0,0)" class="label">
                                    <foreignObject width="0" height="0">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; white-space: nowrap;"><span></span></div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="nodes">
                            <g class="node" id="A" transform="translate(180.3515625,36.6640625)" style="opacity: 1;">
                                <rect rx="5" ry="5" x="-35.34375" y="-16.6640625" width="70.6875" height="33.328125">
                                </rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-25.34375,-6.6640625)">
                                        <foreignObject width="50.69140625" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                Simulator</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="B" transform="translate(58.0078125,119.9921875)" style="opacity: 1;">
                                <rect rx="5" ry="5" x="-38.0078125" y="-16.6640625" width="76.015625"
                                    height="33.328125"></rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-28.0078125,-6.6640625)">
                                        <foreignObject width="56.02734375" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                gpgpu-sim</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="C" transform="translate(180.3515625,119.9921875)" style="opacity: 1;">
                                <rect rx="5" ry="5" x="-34.3359375" y="-16.6640625" width="68.671875"
                                    height="33.328125"></rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-24.3359375,-6.6640625)">
                                        <foreignObject width="48.68359375" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                cuda-sim</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                            <g class="node" id="D" transform="translate(293.703125,119.9921875)" style="opacity: 1;">
                                <rect rx="5" ry="5" x="-29.015625" y="-16.6640625" width="58.03125" height="33.328125">
                                </rect>
                                <g class="label" transform="translate(0,0)">
                                    <g transform="translate(-19.015625,-6.6640625)">
                                        <foreignObject width="38.03515625" height="13.33349609375">
                                            <div xmlns="http://www.w3.org/1999/xhtml"
                                                style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                                libcuda</div>
                                        </foreignObject>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </svg></div>
        <p><code>libcuda</code><span> folder holds the APIs to override hardware driver</span></p>
        <p><code>gpgpu-sim</code><span> folder holds the timing model</span></p>
        <p><code>cuda-sim</code><span> folder holds the functional model</span></p>
        <h4><a name="starting-the-simulation-startup" class="md-header-anchor"></a><span>Starting the Simulation
                (startup)</span></h4>
        <ul>
            <li>
                <p><code>&lt;&lt;&lt;&gt;&gt;&gt;</code><span> calls </span><code>cudaLaunch</code><span> as generated
                        in NVCC</span></p>
            </li>
            <li>
                <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
                    lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kernel_config</span> <span class="cm-variable">config</span> <span class="cm-operator">=</span> <span class="cm-variable">g_cuda_launch_stack</span>.<span class="cm-variable">back</span>();</span></pre>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div>
    <div class="CodeMirror-gutters" style="display: none; height: 23px;"></div>
    </div>
    </div>
    </pre>
    <p><span>Kernel is pushed to stack and then launched, arguments passed from
        </span><code>&lt;&lt;&lt;&gt;&gt;&gt;</code><span> notation</span></p>
    </li>
    <li>
        <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
            lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">kernel_info_t</span> <span class="cm-operator">*</span><span class="cm-variable">grid</span> <span class="cm-operator">=</span> <span class="cm-variable">ctx</span><span class="cm-operator">-&gt;</span><span class="cm-variable">api</span><span class="cm-operator">-&gt;</span><span class="cm-variable">gpgpu_cuda_ptx_sim_init_grid</span>(</span></pre>
        </div>
        <pre class=" CodeMirror-line "
            role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">hostFun</span>, <span class="cm-variable">config</span>.<span class="cm-variable">get_args</span>(), <span class="cm-variable">config</span>.<span class="cm-variable">grid_dim</span>(), <span class="cm-variable">config</span>.<span class="cm-variable">block_dim</span>(), <span class="cm-variable">context</span></span></pre>
        <pre class=" CodeMirror-line "
            role="presentation"><span role="presentation" style="padding-right: 0.1px;">);</span></pre>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 68px;">
        </div>
        <div class="CodeMirror-gutters" style="display: none; height: 68px;"></div>
        </div>
        </div>
        </pre>
        <p><span>Initializes the grid and populate </span><code>kernel_info_t</code><span> to provide simulator with all
                the necessary information to simulate</span></p>
    </li>
    <li>
        <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
            lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">stream_operation</span> <span class="cm-def">op</span>(<span class="cm-variable">grid</span>.<span class="cm-variable">g_ptx_sim_mode</span>.<span class="cm-variable">stream</span>);</span></pre>
        </div>
        <pre class=" CodeMirror-line "
            role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">g_stream_manager</span><span class="cm-operator">-&gt;</span><span class="cm-variable">push</span>(<span class="cm-variable">op</span>);</span></pre>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;">
        </div>
        <div class="CodeMirror-gutters" style="display: none; height: 46px;"></div>
        </div>
        </div>
        </pre>
        <p><span>Push grid to the stream manager. GPGPU-Sim handles concurrent CUDA streams. </span></p>
        <p><span>Cannot launch kernel straight away, scheduled by the stream manager instead. </span></p>
        <p><span>One thread is CPU, one thread is the stream scheduler.</span></p>
        <p><span>Stream manager asynchronously takes kernels off stream and run in GPGPU-sim execution thread. </span>
        </p>
        <p><code>memcpy</code><span> is an implicit synchronization between the CPU thread and the GPU thread. The CPU
                will wait for the GPU to finish before continuing. </span></p>
    </li>
    <li>
        <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
            lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">global</span> <span class="cm-variable">variables</span>.<span class="cm-variable">__cudaRegisterFunction</span>, <span class="cm-variable">__cudaRegisterVar</span></span></pre>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;">
        </div>
        <div class="CodeMirror-gutters" style="display: none; height: 23px;"></div>
        </div>
        </div>
        </pre>
        <p><span>Provides information about device code. Happens </span><strong><span>before</span></strong><span>
            </span><code>main()</code></p>
    </li>
    <li>
        <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
            lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">gpgpu_ptx_sim_init_perf</span>()</span></pre>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;">
        </div>
        <div class="CodeMirror-gutters" style="display: none; height: 23px;"></div>
        </div>
        </div>
        </pre>
        <p><span>First call to any CUDA API will trigger this. </span></p>
        <p><span>This sets up the environmental variables (debug info, sim mode)</span></p>
        <p><span>Parses all the </span><code>gpgpusim.config</code><span> file configurations</span></p>
        <blockquote>
            <p><span>SM7-TITANV</span></p>
        </blockquote>
        <p><span>Creates shader cores, etc.</span></p>
    </li>
    <li>
        <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
            lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">__cudaRegisterFatBinary</span>();</span></pre>
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;">
        </div>
        <div class="CodeMirror-gutters" style="display: none; height: 23px;"></div>
        </div>
        </div>
        </pre>
        <p><span>Generally the first call in the simulation</span></p>
    </li>
    </ul>
    <h4><a name="ptx" class="md-header-anchor"></a><span>PTX</span></h4>
    <p><em><span>Virtual ISA from NVIDIA</span></em></p>
    <ul>
        <li><code>cuobjdump</code><span>pulls out all necessary information from binary (PTX calls)</span></li>
        <li><span>Use PTX with the highest SM version</span></li>
        <li><span>PTX is essentially the assembly code for the GPU</span></li>
    </ul>
    <p><strong><span>PTX Parsing</span></strong></p>
    <ul>
        <li><span>&quot;flex+bison&quot; is a compiler front-end, parses the assembly text</span></li>
        <li><code>cuda-sim/ptx.l</code><span> used to find tokens</span></li>
    </ul>
    <h4><a name="stream-manager" class="md-header-anchor"></a><span>Stream Manager</span></h4>
    <div class="md-diagram-panel"><svg id="mermaidChart12" width="100%" xmlns="http://www.w3.org/2000/svg"
            style="max-width: 501.34375px;" viewBox="0 0 501.34375 550.125">
            <style>
                :root {
                    --mermaid-font-family: sans-serif
                }

                :root {
                    --mermaid-alt-font-family: sans-serif
                }
            </style>
            <style></style>
            <g transform="translate(-12, -12)">
                <g class="output">
                    <g class="clusters">
                        <g class="cluster" id="Stream" transform="translate(455.34375,429.1328125)" style="opacity: 1;">
                            <rect width="100" height="83.328125" x="-50" y="-41.6640625"></rect>
                            <g class="label" transform="translate(0, -27.6640625)" id="mermaidChart12Text">
                                <g transform="translate(-19.3359375,-6.6640625)">
                                    <foreignObject width="38.68359375" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Stream</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="cluster" id="subGraph1" transform="translate(299.0078125,333.3046875)"
                            style="opacity: 1;">
                            <rect width="172.671875" height="274.984375" x="-86.3359375" y="-137.4921875"></rect>
                            <g class="label" transform="translate(0, -123.4921875)" id="mermaidChart12Text">
                                <g transform="translate(-24.34375,-6.6640625)">
                                    <foreignObject width="48.69921875" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Stream 0</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="cluster" id="subGraph0" transform="translate(106.3359375,333.3046875)"
                            style="opacity: 1;">
                            <rect width="172.671875" height="274.984375" x="-86.3359375" y="-137.4921875"></rect>
                            <g class="label" transform="translate(0, -123.4921875)" id="mermaidChart12Text">
                                <g transform="translate(-24.34375,-6.6640625)">
                                    <foreignObject width="48.69921875" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Stream 1</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                    </g>
                    <g class="edgePaths">
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path" d="M299.0078125,53.328125L299.0078125,82.90625L299.0078125,112.484375"
                                marker-end="url(#arrowhead529)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead529" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M299.0078125,145.8125L299.0078125,170.8125L299.0078125,195.8125L299.0078125,220.8125"
                                marker-end="url(#arrowhead530)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead530" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M282.7202139391811,132.67052667058013L106.3359375,170.8125L106.3359375,195.8125L106.3359375,220.8125"
                                marker-end="url(#arrowhead531)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead531" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M315.10986614856506,133.43968991656078L455.34375,170.8125L455.34375,195.8125L455.34375,237.4765625L455.34375,279.140625L455.34375,320.8046875L455.34375,362.46875L455.34375,387.46875L455.34375,412.46875"
                                marker-end="url(#arrowhead532)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead532" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path" d="M106.3359375,254.140625L106.3359375,279.140625L106.3359375,304.140625"
                                marker-end="url(#arrowhead533)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead533" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M106.3359375,337.46875L106.3359375,362.46875L106.3359375,387.46875L106.3359375,412.46875"
                                marker-end="url(#arrowhead534)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead534" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path" d="M299.0078125,254.140625L299.0078125,279.140625L299.0078125,304.140625"
                                marker-end="url(#arrowhead535)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead535" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M299.0078125,337.46875L299.0078125,362.46875L299.0078125,387.46875L299.0078125,412.46875"
                                marker-end="url(#arrowhead536)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead536" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M106.3359375,445.796875L106.3359375,470.796875L106.3359375,495.796875L234.328125,523.474368144818"
                                marker-end="url(#arrowhead537)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead537" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M299.0078125,445.796875L299.0078125,470.796875L299.0078125,495.796875L299.0078125,520.796875"
                                marker-end="url(#arrowhead538)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead538" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M455.34375,445.796875L455.34375,470.796875L455.34375,495.796875L361.5363245359085,520.796875"
                                marker-end="url(#arrowhead539)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead539" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath"
                                        style="stroke-width: 1; stroke-dasharray: 1, 0;"></path>
                                </marker>
                            </defs>
                        </g>
                    </g>
                    <g class="edgeLabels">
                        <g class="edgeLabel" transform="translate(299.0078125,82.90625)" style="opacity: 1;">
                            <g transform="translate(-28.3359375,-4.578125)" class="label">
                                <foreignObject width="56.6796875" height="9.16650390625">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span>CUDA API</span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                    </g>
                    <g class="nodes">
                        <g class="node" id="E" transform="translate(455.34375,429.1328125)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-15" y="-16.6640625" width="30" height="33.328125"></rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-5,-6.6640625)">
                                    <foreignObject width="10.01171875" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            ...</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="G" transform="translate(299.0078125,320.8046875)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-51.3359375" y="-16.6640625" width="102.671875" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-41.3359375,-6.6640625)">
                                    <foreignObject width="82.68359375" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            CUDA Memcpy</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="C" transform="translate(299.0078125,237.4765625)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-23.3359375" y="-16.6640625" width="46.671875" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-13.3359375,-6.6640625)">
                                    <foreignObject width="26.6796875" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Sync</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="H" transform="translate(299.0078125,429.1328125)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-48.6953125" y="-16.6640625" width="97.390625" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-38.6953125,-6.6640625)">
                                    <foreignObject width="77.39453125" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Kernel Launch</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="i" transform="translate(106.3359375,320.8046875)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-51.3359375" y="-16.6640625" width="102.671875" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-41.3359375,-6.6640625)">
                                    <foreignObject width="82.68359375" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            CUDA Memcpy</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="D" transform="translate(106.3359375,237.4765625)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-23.3359375" y="-16.6640625" width="46.671875" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-13.3359375,-6.6640625)">
                                    <foreignObject width="26.6796875" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Sync</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="j" transform="translate(106.3359375,429.1328125)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-48.6953125" y="-16.6640625" width="97.390625" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-38.6953125,-6.6640625)">
                                    <foreignObject width="77.39453125" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Kernel Launch</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="A" transform="translate(299.0078125,36.6640625)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-36.671875" y="-16.6640625" width="73.34375" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-26.671875,-6.6640625)">
                                    <foreignObject width="53.34765625" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            Host CPU</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="*" transform="translate(299.0078125,129.1484375)" style="opacity: 1;">
                            <circle x="-12.3359375" y="-16.6640625" r="16.6640625"></circle>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-2.3359375,-6.6640625)">
                                    <foreignObject width="4.67578125" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            *</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="l" transform="translate(299.0078125,537.4609375)" style="opacity: 1;">
                            <rect rx="5" ry="5" x="-64.6796875" y="-16.6640625" width="129.359375" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-54.6796875,-6.6640625)">
                                    <foreignObject width="109.36328125" height="13.33349609375">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.3335px; white-space: nowrap;">
                                            GPGPU-Sim Thread</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </g>
        </svg></div>
    <p><span>All the stats are displayed after every kernel is finished.</span></p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
        lang="pseudocode"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="pseudocode"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">do</span> <span class="cm-bracket">{</span></span></pre>
    </div>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">wait</span> <span class="cm-keyword">for</span> <span class="cm-variable">streamOp</span><span class="cm-bracket">;</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">do</span> <span class="cm-bracket">{</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Obtain</span> <span class="cm-variable">streamOp</span><span class="cm-bracket">;</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Perform</span> <span class="cm-variable">streamOp</span><span class="cm-bracket">;</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">cycle</span><span class="cm-bracket">();</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">active</span> <span class="cm-operator">=</span> <span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">active</span> <span class="cm-keyword">or</span> <span class="cm-variable">streamMgr</span><span class="cm-operator">-&gt;</span><span class="cm-variable">empty</span><span class="cm-bracket">();</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-bracket">(</span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">finishedKernel</span><span class="cm-bracket">())</span> </span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">print_stats</span><span class="cm-bracket">();</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-bracket">}</span> <span class="cm-keyword">while</span><span class="cm-bracket">(</span><span class="cm-variable">active</span><span class="cm-bracket">);</span></span></pre>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">}</span> <span class="cm-keyword">while</span><span class="cm-bracket">(</span><span class="cm-operator">!</span><span class="cm-variable">gpu_done</span><span class="cm-bracket">);</span></span></pre>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 251px;"></div>
    <div class="CodeMirror-gutters" style="display: none; height: 251px;"></div>
    </div>
    </div>
    </pre>
    <p><span>CPU is likely to queue up all the threads since it is not a simulator. It will stall on memcpy
            (synchronous)</span></p>
    <h4><a name="functional-simulator" class="md-header-anchor"></a><span>Functional Simulator</span></h4>
    <div class="md-diagram-panel"><svg id="mermaidChart13" width="360.3125" xmlns="http://www.w3.org/2000/svg"
            height="100%" viewBox="-10 -10 246.875 320.921875">
            <style>
                :root {
                    --mermaid-font-family: sans-serif
                }

                :root {
                    --mermaid-alt-font-family: sans-serif
                }
            </style>
            <style></style>
            <g></g>
            <defs>
                <marker id="extensionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240"
                    orient="auto">
                    <path d="M 1,7 L18,13 V 1 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="extensionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto">
                    <path d="M 1,1 V 13 L18,7 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="compositionStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240"
                    orient="auto">
                    <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="compositionEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto">
                    <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="aggregationStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240"
                    orient="auto">
                    <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="aggregationEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto">
                    <path d="M 18,7 L9,13 L1,7 L9,1 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="dependencyStart" class="extension" refX="0" refY="7" markerWidth="190" markerHeight="240"
                    orient="auto">
                    <path d="M 5,7 L9,13 L1,7 L9,1 Z"></path>
                </marker>
            </defs>
            <defs>
                <marker id="dependencyEnd" refX="19" refY="7" markerWidth="20" markerHeight="28" orient="auto">
                    <path d="M 18,7 L9,13 L14,7 L9,1 Z"></path>
                </marker>
            </defs>
            <g id="mermaidChart13classId0" class="classGroup" transform="translate(0,0 )">
                <rect x="0" y="0" width="91.828125" height="63.640625"></rect><text y="15" x="0">
                    <tspan class="title" x="22.0234375">kernelinfo</tspan>
                </text>
                <line x1="0" y1="22.015625" y2="22.015625" x2="91.828125"></line><text x="5" y="32.015625" fill="white"
                    class="classText">
                    <tspan x="5">+ grid/block dim</tspan>
                    <tspan x="5" dy="10">+ launch status</tspan>
                    <tspan x="5" dy="10">+ param memory</tspan>
                </text>
                <line x1="0" y1="59.03125" y2="59.03125" x2="91.828125"></line><text x="5" y="74.03125" fill="white"
                    class="classText"></text>
            </g>
            <g id="mermaidChart13classId1" class="classGroup" transform="translate(130.625,113.640625 )">
                <rect x="0" y="0" width="94.0625" height="53.640625"></rect><text y="15" x="0">
                    <tspan class="title" x="23.1484375">ptxctainfo</tspan>
                </text>
                <line x1="0" y1="22.015625" y2="22.015625" x2="94.0625"></line><text x="5" y="32.015625" fill="white"
                    class="classText">
                    <tspan x="5">+ barrier</tspan>
                    <tspan x="5" dy="10">+ shared memory</tspan>
                </text>
                <line x1="0" y1="49.03125" y2="49.03125" x2="94.0625"></line><text x="5" y="64.03125" fill="white"
                    class="classText"></text>
            </g>
            <g id="mermaidChart13classId2" class="classGroup" transform="translate(141.828125,10 )">
                <rect x="0" y="0" width="71.65625" height="43.640625"></rect><text y="15" x="0">
                    <tspan class="title" x="23.46875">coret</tspan>
                </text>
                <line x1="0" y1="22.015625" y2="22.015625" x2="71.65625"></line><text x="5" y="32.015625" fill="white"
                    class="classText">
                    <tspan x="5">SIMT Stacks</tspan>
                </text>
                <line x1="0" y1="39.03125" y2="39.03125" x2="71.65625"></line><text x="5" y="54.03125" fill="white"
                    class="classText"></text>
            </g>
            <g id="mermaidChart13classId3" class="classGroup" transform="translate(128.4375,217.28125 )">
                <rect x="0" y="0" width="98.4375" height="83.640625"></rect><text y="15" x="0">
                    <tspan class="title" x="17.28125">ptxthreadinfo</tspan>
                </text>
                <line x1="0" y1="22.015625" y2="22.015625" x2="98.4375"></line><text x="5" y="32.015625" fill="white"
                    class="classText">
                    <tspan x="5">+ thread IDs</tspan>
                    <tspan x="5" dy="10">+ registers</tspan>
                    <tspan x="5" dy="10">+ program counter</tspan>
                    <tspan x="5" dy="10">+ call stack</tspan>
                    <tspan x="5" dy="10">+ local memory</tspan>
                </text>
                <line x1="0" y1="79.03125" y2="79.03125" x2="98.4375"></line><text x="5" y="94.03125" fill="white"
                    class="classText"></text>
            </g>
            <path
                d="M177.65625,53.640625L177.65625,59.473958333333336C177.65625,65.30729166666667,177.65625,76.97395833333333,177.65625,86.97395833333333C177.65625,96.97395833333333,177.65625,105.30729166666667,177.65625,109.47395833333333L177.65625,113.640625"
                id="edge4" class="relation" marker-start="url(#dependencyStart)"></path>
            <path
                d="M177.65625,167.28125L177.65625,171.44791666666666C177.65625,175.61458333333334,177.65625,183.94791666666666,177.65625,192.28125C177.65625,200.61458333333334,177.65625,208.94791666666666,177.65625,213.11458333333334L177.65625,217.28125"
                id="edge5" class="relation" marker-start="url(#dependencyStart)"></path>
        </svg></div>
    <ul>
        <li>
            <p><code>kernel_info</code><span> stores all the parameters of the kernel</span></p>
        </li>
        <li>
            <p><code>ptx_cta_info</code><span> stores all the information of thread blocks</span></p>
        </li>
        <li>
            <p><code>ptx_thread_info</code><span> stores information of individual threads</span></p>
            <p><span>Can be treated like MIMD since thread ID and registers are stored within this block</span></p>
        </li>
        <li>
            <p><code>SIMT Stack</code><span> is a separate grouping to manage </span><em><span>warps</span></em></p>
        </li>
        <li>
            <p><span>Global Memory and GPU Memory Management is stored in </span><code>gpgpu_t</code><span>, for example
                    an array (matrix) used in the calculation</span></p>
        </li>
        <li>
            <p><code>function_info</code><span> is filled by the parsed PTX. It stores
                </span><code>ptx_instruction</code><span> to the program counter. (Also houses the control flow
                    analysis)</span></p>
        </li>
    </ul>
    <blockquote>
        <p><strong><span>What is a thread?</span></strong><span> </span></p>
        <p><span>Program counter + set of registers + set of local memory locations</span></p>
        <p><strong><span>What is a CTA?</span></strong></p>
        <p><span>A set of threads with access to the same shared memory</span></p>
    </blockquote>
    <p><code>cuda-sim/instruction.cc</code><span> is a one to one mapping of the opcode implementing functions. Mapping
            is stored as </span><code>opcode.def</code><span>.</span></p>
    <p><span>Functional execution is completed at the </span><strong><span>issue stage</span></strong><span> of the
            timing pipeline, not at the write back. This is when it is confirmed that it will execute (The timing
            pipeline has to go through fetch, etc.)</span></p>
    <ul>
        <li><span>calls </span><code>ptx_thread_info::ptx_exec_inst()</code><span> to execute the functional simulation
                (essentially a giant switch statement emulating the instruction)</span></li>
        <li><span>will be completed faster than the remainder of the timing pipeline</span></li>
        <li><span>8-byte instructions (RISC)</span></li>
    </ul>
    <p><span>Threads communicate through a combination of </span><strong><span>Global Memory</span></strong><span> and
        </span><strong><span>Share Memory</span></strong><span>. This is achieved through </span><code>LDR</code><span>
            and </span><code>STR</code><span>. </span></p>
    <ul>
        <li><span>Shared Memory is at a single location. Global Memory encompasses caches that may be out-of-date</span>
        </li>
        <li><strong><span>Atomic</span></strong><span> operations are special. They are simulated functionally after the
                atomic operations exists the memory partition to avoid timing issues when multiple threads are
                attempting to write/read to the same location</span></li>
        <li><span>Most CUDA code avoids intra-kernel communication through global memory since memory ordering is very
                relaxed and not well-enforced. The solution is typically to have instructions in separate kernels. This
                guarantees completion between next instruction.</span></li>
    </ul>
    <p><strong><span>Memory Space Buffer</span></strong></p>
    <ul>
        <li><span>Various memory spaces (map of memory address </span><span class="MathJax_SVG" tabindex="-1"
                style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                    style="vertical-align: -0.238ex;">
                    <defs>
                        <path stroke-width="0" id="E16-MJMAIN-2192"
                            d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                        </path>
                    </defs>
                    <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                        <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                    </g>
                </svg></span>
            <script type="math/tex">\rightarrow</script><span> pages)</span>
        </li>
        <li><span>Global, texture, etc.</span></li>
    </ul>
    <h4><a name="timing-model-n373" class="md-header-anchor"></a><span>Timing Model</span></h4>
    <div class="md-diagram-panel"><svg id="mermaidChart14" width="100%" xmlns="http://www.w3.org/2000/svg"
            style="max-width: 390.09375px;" viewBox="0 0 390.09375 285.984375">
            <style>
                :root {
                    --mermaid-font-family: sans-serif
                }

                :root {
                    --mermaid-alt-font-family: sans-serif
                }
            </style>
            <style></style>
            <g transform="translate(-12, -12)">
                <g class="output">
                    <g class="clusters">
                        <g class="cluster" id="subGraph1" transform="translate(310.734375,154.9921875)"
                            style="opacity: 1;">
                            <rect width="166.71875" height="269.984375" x="-83.359375" y="-134.9921875"></rect>
                            <g class="label" transform="translate(0, -120.9921875)" id="mermaidChart14Text">
                                <g transform="translate(-35.7890625,-6.6640625)">
                                    <foreignObject width="71.58984375" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            Timing Model</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="cluster" id="subGraph0" transform="translate(98.6875,154.9921875)"
                            style="opacity: 1;">
                            <rect width="157.375" height="269.984375" x="-78.6875" y="-134.9921875"></rect>
                            <g class="label" transform="translate(0, -120.9921875)" id="mermaidChart14Text">
                                <g transform="translate(-40.015625,-6.6640625)">
                                    <foreignObject width="80.0390625" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            Abstract Model</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                    </g>
                    <g class="edgePaths">
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M130.375,71.6640625L177.375,71.6640625L202.375,71.6640625L227.375,71.6640625L271.3828125,71.6640625"
                                marker-end="url(#arrowhead589)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead589" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M125.3671875,154.9921875L177.375,154.9921875L202.375,154.9921875L227.375,154.9921875L256.375,154.9921875"
                                marker-end="url(#arrowhead590)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead590" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                        <g class="edgePath" style="opacity: 1;">
                            <path class="path"
                                d="M152.375,238.3203125L177.375,238.3203125L202.375,238.3203125L227.375,238.3203125L252.375,238.3203125"
                                marker-end="url(#arrowhead591)" style="fill:none"></path>
                            <defs>
                                <marker id="arrowhead591" viewBox="0 0 10 10" refX="9" refY="5"
                                    markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto">
                                    <path d="M 0 0 L 0 0 L 0 0 z" style="fill: #333"></path>
                                </marker>
                            </defs>
                        </g>
                    </g>
                    <g class="edgeLabels">
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                        <g class="edgeLabel" transform="" style="opacity: 1;">
                            <g transform="translate(0,0)" class="label">
                                <foreignObject width="0" height="0">
                                    <div xmlns="http://www.w3.org/1999/xhtml"
                                        style="display: inline-block; white-space: nowrap;"><span></span></div>
                                </foreignObject>
                            </g>
                        </g>
                    </g>
                    <g class="nodes">
                        <g class="node" id="D" transform="translate(310.734375,71.6640625)" style="opacity: 1;">
                            <rect rx="0" ry="0" x="-39.3515625" y="-16.6640625" width="78.703125" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-29.3515625,-6.6640625)">
                                    <foreignObject width="58.7109375" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            gpgpu_sim</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="E" transform="translate(310.734375,154.9921875)" style="opacity: 1;">
                            <rect rx="0" ry="0" x="-54.359375" y="-16.6640625" width="108.71875" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-44.359375,-6.6640625)">
                                    <foreignObject width="88.72265625" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            shader_core_ctx</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="F" transform="translate(310.734375,238.3203125)" style="opacity: 1;">
                            <rect rx="0" ry="0" x="-58.359375" y="-16.6640625" width="116.71875" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-48.359375,-6.6640625)">
                                    <foreignObject width="96.71875" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            warp_inst_t, inst_t</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="A" transform="translate(98.6875,71.6640625)" style="opacity: 1;">
                            <rect rx="0" ry="0" x="-31.6875" y="-16.6640625" width="63.375" height="33.328125"></rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-21.6875,-6.6640625)">
                                    <foreignObject width="43.38671875" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            gpgpu_t</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="B" transform="translate(98.6875,154.9921875)" style="opacity: 1;">
                            <rect rx="0" ry="0" x="-26.6796875" y="-16.6640625" width="53.359375" height="33.328125">
                            </rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-16.6796875,-6.6640625)">
                                    <foreignObject width="33.359375" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            core_t</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                        <g class="node" id="C" transform="translate(98.6875,238.3203125)" style="opacity: 1;">
                            <rect rx="0" ry="0" x="-53.6875" y="-16.6640625" width="107.375" height="33.328125"></rect>
                            <g class="label" transform="translate(0,0)">
                                <g transform="translate(-43.6875,-6.6640625)">
                                    <foreignObject width="87.3828125" height="13.3330078125">
                                        <div xmlns="http://www.w3.org/1999/xhtml"
                                            style="display: inline-block; font-size: 0.9rem; line-height: 13.333px; white-space: nowrap;">
                                            ptx_instruction_t</div>
                                    </foreignObject>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
            </g>
        </svg></div>
    <p><img src="C:\Users\lucyl\AppData\Roaming\Typora\typora-user-images\image-20200513144327164.png"
            referrerpolicy="no-referrer" alt="image-20200513144327164"></p>
    <p>&nbsp;</p>
    <p><strong><span>gpgpu_sim</span></strong><span> </span><span class="MathJax_SVG" tabindex="-1"
            style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                style="vertical-align: -0.238ex;">
                <defs>
                    <path stroke-width="0" id="E16-MJMAIN-2192"
                        d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                    </path>
                </defs>
                <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                    <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                </g>
            </svg></span>
        <script type="math/tex">\rightarrow</script><span> </span><code>g_the_gpu</code>
    </p>
    <ul>
        <li>
            <p><span>Initialization</span></p>
            <ul>
                <li><code>gpgpu_sim::gpgpu_sim();</code></li>
                <li><span>Initializes statistics</span></li>
                <li><span>Called in </span><code>gpgpu_ptx_sim_init_perf()</code></li>
            </ul>
        </li>
        <li>
            <p><span>Kernel Launch</span></p>
        </li>
        <li>
            <p><span>Clock Domain management</span></p>
        </li>
        <li>
            <p><span>Main Simulation Loop</span></p>
            <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="pseudocode"
                style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="pseudocode"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">do</span> <span class="cm-bracket">{</span></span></pre>
            </div>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Wait</span> <span class="cm-keyword">for</span> <span class="cm-variable">streamOp</span><span class="cm-bracket">;</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">do</span> <span class="cm-bracket">{</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">Obtain</span> <span class="cm-variable">streamOp</span><span class="cm-bracket">;</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-bracket">(</span><span class="cm-variable">streamOp</span> <span class="cm-operator">==</span> <span class="cm-variable">Launch</span><span class="cm-bracket">)</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">launch</span><span class="cm-bracket">();</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">cycle</span><span class="cm-bracket">();</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-doc">// has to check GPU running or</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-doc">// complete but still accessing memory</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">active</span> <span class="cm-operator">=</span> <span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">active</span><span class="cm-bracket">()</span> <span class="cm-keyword">or</span> <span class="cm-variable">streamMgr</span><span class="cm-operator">-&gt;</span><span class="cm-variable">empty</span><span class="cm-bracket">();</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-bracket">(</span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">finished_kernel</span><span class="cm-bracket">())</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">gpu</span><span class="cm-operator">-&gt;</span><span class="cm-variable">print_stats</span><span class="cm-bracket">();</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-bracket">}</span> <span class="cm-keyword">while</span><span class="cm-bracket">(</span><span class="cm-variable">active</span><span class="cm-bracket">);</span></span></pre>
            <pre class=" CodeMirror-line "
                role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">}</span> <span class="cm-keyword">while</span><span class="cm-bracket">(</span><span class="cm-operator">!</span><span class="cm-variable">gpu_done</span><span class="cm-bracket">);</span></span></pre>
            </div>
            </div>
            </div>
            </div>
            </div>
            <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 342px;">
            </div>
            <div class="CodeMirror-gutters" style="display: none; height: 342px;"></div>
            </div>
            </div>
            </pre>
        </li>
    </ul>
    <p><code>gpgpu_sim::cycle()</code></p>
    <ul>
        <li>
            <p><span>Checks all clock domains and only </span><em><span>tick</span></em><span> the ones that should be
                    cycled</span></p>
            <ul>
                <li><span>CORE (SIMT)</span></li>
                <li><span>ICNT (Interconnect)</span></li>
                <li><span>DRAM (Memory)</span></li>
                <li><span>L2 (L2 Cache in Memory Partition)</span></li>
            </ul>
        </li>
    </ul>
    <p><code>gpgpu_sim::issue_block2core()</code></p>
    <ul>
        <li>
            <p><span>CTA scheduling</span></p>
        </li>
        <li>
            <p><span>Decides which CTA to push to which SIMT core</span></p>
            <ul>
                <li><span>Max: </span><code>shader_core_config::max_cta()</code></li>
            </ul>
        </li>
        <li>
            <p><span>Initializes the threads inside the new blocks</span></p>
            <ul>
                <li><code>ptx_sim_init_thread()</code></li>
            </ul>
        </li>
        <li>
            <p><strong><span>Default</span></strong><span>: Round robin through clusters (send block to cluster) then
                    round robin to SIMT cores (send block to core)</span></p>
        </li>
    </ul>
    <p><code>simt_core_cluster</code></p>
    <ul>
        <li>
            <p><code>core_cycle()</code><span> simulates a cycle in the core</span></p>
        </li>
        <li>
            <p><span>at </span><code>icnt_cycle()</code><span>, results may be returned to the SIMT core cluster through
                    the </span><em><span>Response FIFO</span></em></p>
        </li>
        <li>
            <p><code>shader_memory_interface</code><span> interfaces between SIMT core to Injection Buffer</span></p>
        </li>
        <li>
            <p><code>icnt_inject_request_packet()</code><span> interfaces between the Injection Buffer to the
                    interconnect simulation</span></p>
        </li>
        <li>
            <p><span>located in </span><code>gpgpu-sim/shader.cc</code></p>
        </li>
        <li>
            <p><span>Contains all the microarchitecture components of the SIMT core</span></p>
            <ul>
                <li><code>scheduler_unit</code></li>
                <li><code>scoreboard</code></li>
                <li><code>opndcoll_rfu_t</code><span> (operant collecter)</span></li>
                <li><code>simd_function_unit</code></li>
                <li><code>ldst_unit</code><span> (memory unit)</span></li>
            </ul>
        </li>
    </ul>
    <h3><a name="ray-tracing-papers" class="md-header-anchor"></a><span>Ray Tracing Papers</span></h3>
    <h4><a name="understanding-the-efficiency-of-ray-traversal-on-gpus" class="md-header-anchor"></a><span>Understanding
            the Efficiency of Ray Traversal on GPUs</span></h4>
    <ul>
        <li>
            <p><span>Woop&#39;s intersection test requires 48 bytes per triangle</span></p>
        </li>
        <li>
            <p><span>Packet-traversal, Ray-traversal</span></p>
        </li>
        <li>
            <p><span>Speculative traversal</span></p>
            <blockquote>
                <p><span>&quot;if a warp is going to execute node traversal anyway, why not let all the rays
                        participate&quot;</span></p>
            </blockquote>
            <p><span>Triangles not executing node traversal are idle anyway, so there is no harm (besides fetching some
                    unnecessary node data) to execute node traversal for all even if some are actually complete.</span>
            </p>
        </li>
        <li>
            <p><span>Slowdowns are caused by a select few long-running rays that keep the entire warp
                    &quot;hostage&quot;</span></p>
        </li>
        <li>
            <p><span>Diffuse rays are limited by the speed of memory</span></p>
        </li>
        <li>
            <p><span>Queue up additional rays and check ever few cycles to see if any can be replaced as to avoid one
                    ray blocking the whole warp</span></p>
        </li>
        <li>
            <p><span>Trees wider than binary trees are no efficient on SIMD/SIMT</span></p>
        </li>
    </ul>
    <h3><a name="francois-thesis-notes" class="md-header-anchor"></a><span>Francois Thesis Notes</span></h3>
    <p><strong><span>Benchmarks</span></strong><span> : &quot;designed to mimic a particular type of workload on a
            system&quot;</span></p>
    <ul>
        <li><span>Synthetic </span><span class="MathJax_SVG" tabindex="-1"
                style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                    style="vertical-align: -0.238ex;">
                    <defs>
                        <path stroke-width="0" id="E16-MJMAIN-2192"
                            d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                        </path>
                    </defs>
                    <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                        <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                    </g>
                </svg></span>
            <script type="math/tex">\rightarrow</script><span> specially created programs that impose the workload on
                the component</span>
        </li>
        <li><span>Application </span><span class="MathJax_SVG" tabindex="-1"
                style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                    style="vertical-align: -0.238ex;">
                    <defs>
                        <path stroke-width="0" id="E16-MJMAIN-2192"
                            d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                        </path>
                    </defs>
                    <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                        <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                    </g>
                </svg></span>
            <script type="math/tex">\rightarrow</script><span> real-world programs on the system</span>
        </li>
    </ul>
    <p><span>Benchmarks should contain performance-sensitive aspects as seen in the key algorithms of an application.
            Running this snippet on a cycle-accurate simulator gives clues to how to improve performance.</span></p>
    <h4><a name="the-rtao-benchmark" class="md-header-anchor"></a><span>The RTAO Benchmark</span></h4>
    <blockquote>
        <p><span>white = perfectly occluded</span></p>
    </blockquote>
    <ul>
        <li><strong><span>SPP</span></strong><span> </span><span class="MathJax_SVG" tabindex="-1"
                style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                    style="vertical-align: -0.238ex;">
                    <defs>
                        <path stroke-width="0" id="E16-MJMAIN-2192"
                            d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                        </path>
                    </defs>
                    <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                        <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                    </g>
                </svg></span>
            <script type="math/tex">\rightarrow</script><span> Samples per pixel</span>
        </li>
        <li><strong><span>SPT</span></strong><span> </span><span class="MathJax_SVG" tabindex="-1"
                style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                    width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                    style="vertical-align: -0.238ex;">
                    <defs>
                        <path stroke-width="0" id="E16-MJMAIN-2192"
                            d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                        </path>
                    </defs>
                    <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                        <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                    </g>
                </svg></span>
            <script type="math/tex">\rightarrow</script><span> Samples per triangle</span>
        </li>
        <li><span>Benchmarks: Aila, Ylitie and OptiX</span></li>
    </ul>
    <p><strong><span>Key Insights</span></strong></p>
    <ul>
        <li>
            <p><span>the main reason for performance reduction with increased scene size is the
                </span><strong><span>number of conflict misses</span></strong><span> and the </span><strong><span>amount
                        of data</span></strong><span> touched by the compute cores.</span></p>
        </li>
        <li>
            <p><span>there is significant room for optimization in </span><strong><span>reducing the overall DRAM
                        accesses</span></strong><span> in raytracing applications</span></p>
            <ul>
                <li><span>A lot of reuse, accessing the same memory address, especially with randomly ordered
                        rays</span></li>
            </ul>
        </li>
        <li>
            <p><span>the best utilization of the cache hierarchy is to </span><strong><span>store the BVH acceleration
                        structure</span></strong></p>
        </li>
    </ul>
    <h2><a name="status-report---may-14" class="md-header-anchor"></a><span>Status Report - May 14</span></h2>
    <p><strong><span>This Week</span></strong><span>:</span></p>
    <ul>
        <li><span>Read Francois&#39;s thesis</span></li>
        <li><span>Went through some other ray tracing papers and the Emerald paper</span></li>
        <li><span>Watched the gpgpu-sim lectures from Tim Rogers that are on YouTube, they were actually quite
                helpful</span></li>
        <li><span>Working through cpen 411 assignment 2 to better understand simulators</span></li>
        <li><span>Cleaned up the JPEG-ACT Verilog code and push to Perforce (that I forgot to do before)</span></li>
    </ul>
    <p><strong><span>Next Week:</span></strong></p>
    <ul>
        <li><span>Plan out some initial steps</span></li>
    </ul>
    <p>&nbsp;</p>
    <h2><a name="ray-tracing-meeting-1---may-15" class="md-header-anchor"></a><span>Ray Tracing Meeting #1 - May
            15</span></h2>
    <h4><a name="notes-n517" class="md-header-anchor"></a><span>Notes</span></h4>
    <p><span>Overall Goals: </span><strong><span>Submit to ISCA 2021</span></strong><span> </span></p>
    <ul>
        <li><span>Have some timing model of NVIDIA&#39;s architecture integrated with Emerald</span></li>
    </ul>
    <h4><a name="tasks" class="md-header-anchor"></a><span>Tasks</span></h4>
    <p><strong><u><span>Long Term</span></u></strong></p>
    <ul>
        <li>
            <p><span>Implement RTAO in Emerald </span></p>
        </li>
        <li>
            <p><span>Model NVIDIA (Turing) in gpgpu-sim</span></p>
            <ul>
                <li>
                    <p><span>Figure out the pieces that are needed</span></p>
                </li>
                <li>
                    <p><span>Figure out the API that go with it? </span></p>
                    <ul>
                        <li><span>Paper on </span><em><span>transactional memory</span></em><span> publication should
                                also include code that can help with how to implement new instructions in gpgpu-sim with
                                the timing model</span></li>
                        <li><span>Most code in </span><code>instructions.cc</code></li>
                    </ul>
                </li>
                <li>
                    <p><span>Read the NVIDIA white papers (apparently very vague)</span></p>
                    <blockquote>
                        <p><a href='https://www.nvidia.com/content/dam/en-zz/Solutions/design-visualization/technologies/turing-architecture/NVIDIA-Turing-Architecture-Whitepaper.pdf'
                                target='_blank'
                                class='url'>https://www.nvidia.com/content/dam/en-zz/Solutions/design-visualization/technologies/turing-architecture/NVIDIA-Turing-Architecture-Whitepaper.pdf</a>
                        </p>
                    </blockquote>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Benchmarks</span></p>
            <ul>
                <li><span>Extract CUDA kernels from existing OptiX code on Github</span></li>
                <li><span>Figure out the ideal scenes to use</span></li>
                <li><span>Ideally developed so other benchmarks can be easily added (instead of developed)</span></li>
            </ul>
        </li>
    </ul>
    <p><strong><u><span>Short Term</span></u></strong></p>
    <ul>
        <li>
            <p><span>Read paper</span></p>
            <blockquote>
                <p><a href='https://users.aalto.fi/~ailat1/publications/aila2010hpg_paper.pdf' target='_blank'
                        class='url'>https://users.aalto.fi/~ailat1/publications/aila2010hpg_paper.pdf</a></p>
            </blockquote>
        </li>
        <li>
            <p><span>MESA support (supports Vulcan)</span></p>
        </li>
        <li>
            <p><span>RTAO is implemented in CUDA, simplest to add CUDA support to Emerald GPU standalone. </span></p>
            <p>💡<span> </span><mark><span>What is Emerald standalone mode vs gpgpu-sim?</span></mark></p>
            <ul>
                <li>
                    <p><span>Possible integration of CUDA + OpenGL </span></p>
                </li>
                <li>
                    <p><span>Raster is done in OpenGL and currently raster and ray tracing do not overlap, but this
                            could change!</span></p>
                    <p>💡<span> </span><mark><span>Look into any current research in hybrid rendering that combines the
                                two</span></mark></p>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Mobile vs. Desktop benchmarks</span></p>
        </li>
        <li>
            <p><span>Focus is on </span><strong><span>Hybrid Rendering</span></strong></p>
            <ul>
                <li><span>Not just ray tracing, although they are still separate entities now</span></li>
                <li><span>Focus on </span><strong><em><span>realism</span></em></strong><span> vs
                    </span><strong><em><span>real-time rendering</span></em></strong></li>
            </ul>
        </li>
        <li>
            <p><span>Slack?</span></p>
        </li>
        <li>
            <p><span>Reading Group </span><strong><span>Thursdays 9:30AM - 10:30AM</span></strong></p>
        </li>
    </ul>
    <p>&nbsp;</p>
    <h2><a name="meeting-2---may-15" class="md-header-anchor"></a><span>Meeting #2 - May 15</span></h2>
    <p><strong><span>Status</span></strong><span>:</span></p>
    <ul>
        <li><span>Done the basics of the cpen 411 assignment, will finish it today</span></li>
        <li><span>Read Francois&#39;s thesis but would like to re-read after reading the papers because some details are
                lost</span></li>
    </ul>
    <p><strong><span>Questions:</span></strong></p>
    <ul>
        <li>
            <p><span>How to get started? </span></p>
            <ul>
                <li><span>Look into implementing new instructions</span></li>
                <li><span>Look into the CUDA API for important features for ray tracing that&#39;s not currently in
                        gpgpu-sim</span></li>
                <li><span>Try to find some information on the Turing architecture, but seems unlikely? What to do?
                    </span></li>
            </ul>
        </li>
    </ul>
    <h4><a name="notes-n601" class="md-header-anchor"></a><span>Notes</span></h4>
    <ul>
        <li>
            <p><span>New </span><code>gpgpu-sim</code><span> updates from a student with Tim submitted as an ISCA
                    paper</span></p>
        </li>
        <li>
            <p><span>Read some books</span></p>
            <blockquote>
                <p><a href='https://www.amazon.ca/Physically-Based-Rendering-Theory-Implementation/dp/0128006455'
                        target='_blank'
                        class='url'>https://www.amazon.ca/Physically-Based-Rendering-Theory-Implementation/dp/0128006455</a>
                </p>
            </blockquote>
            <blockquote>
                <p><a href='https://www.amazon.ca/Real-Time-Rendering-Fourth-Tomas-Akenine-Mo-ebook/dp/B07FSKB982/'
                        target='_blank'
                        class='url'>https://www.amazon.ca/Real-Time-Rendering-Fourth-Tomas-Akenine-Mo-ebook/dp/B07FSKB982/</a>
                </p>
            </blockquote>
            <ul>
                <li>
                    <p><span>Can be expensed? Look on </span><code>intranet.ece.ubc.ca</code><span> </span></p>
                </li>
                <li>
                    <p>💡<span> </span><mark><span>Ask Tommy if he bought the books</span></mark></p>
                </li>
                <li>
                    <p><span>BOTH are available in UBC library</span></p>
                    <p><a href='https://learning.oreilly.com/library/view/real-time-rendering-fourth/9781351816144/xhtml/ch01.xhtml'
                            target='_blank'
                            class='url'>https://learning.oreilly.com/library/view/real-time-rendering-fourth/9781351816144/xhtml/ch01.xhtml</a>
                    </p>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Read some coding</span></p>
            <blockquote>
                <p><a href='https://www.amazon.ca/Effective-Specific-Addison-Wesley-Professional-Computing-ebook/dp/B004V4420U/'
                        target='_blank'
                        class='url'>https://www.amazon.ca/Effective-Specific-Addison-Wesley-Professional-Computing-ebook/dp/B004V4420U/</a>
                </p>
            </blockquote>
            <blockquote>
                <p><a href='https://www.amazon.ca/Pragmatic-Programmer-Journeyman-Master-ebook/dp/B003GCTQAE'
                        target='_blank'
                        class='url'>https://www.amazon.ca/Pragmatic-Programmer-Journeyman-Master-ebook/dp/B003GCTQAE</a>
                </p>
                <p><a href='https://www.amazon.ca/Debugging-Indispensable-Software-Hardware-Problems/dp/0814474578/'
                        target='_blank'
                        class='url'>https://www.amazon.ca/Debugging-Indispensable-Software-Hardware-Problems/dp/0814474578/</a>
                </p>
            </blockquote>
            <ul>
                <li><span>Get the debugging book</span></li>
            </ul>
        </li>
        <li>
            <p><span>Read some philosophy</span></p>
            <ul>
                <li>🎤<span>TALK: &quot;How to have a bad career in research&quot;</span></li>
            </ul>
        </li>
        <li>
            <p><strong><span>Ray Tracing</span></strong></p>
            <ul>
                <li class='md-task-list-item task-list-item task-list-not-done'><input type='checkbox'
                        disabled='disabled' />
                    <p><span>Read NVIDIA Turing white paper</span></p>
                    <ul>
                        <li><span>This will likely have very minimal explanations of how it all works</span></li>
                        <li><span>Suspect that ray tracing acceleration is done with a repurposed memory management unit
                                that helps with dereferencing pointers in the BVH</span></li>
                        <li><span>Similar to a TLB</span></li>
                    </ul>
                </li>
                <li class='md-task-list-item task-list-item task-list-not-done'><input type='checkbox'
                        disabled='disabled' />
                    <p><span>Re-learn </span><strong><span>TLB</span></strong></p>
                    <ul>
                        <li><span>Also read a paper by some Princeton person (search </span><code>GPU TLB</code><span>)
                                and one by David Wood from UWisconsin</span></li>
                    </ul>
                </li>
                <li class='md-task-list-item task-list-item task-list-not-done'><input type='checkbox'
                        disabled='disabled' />
                    <p><span>Search for NVIDIA&#39;s HOTCHIPS presentation on ray tracing for possible insights</span>
                    </p>
                </li>
            </ul>
        </li>
    </ul>
    <p>&nbsp;</p>
    <h3><a name="arch" class="md-header-anchor"></a><span>ARCH</span></h3>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
        lang="bash"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="bash"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">ssh</span> lucy@arch.ece.ubc.ca</span></pre>
    </div>
    <pre class=" CodeMirror-line "
        role="presentation"><span role="presentation" style="padding-right: 0.1px;">pwd: changeme</span></pre>
    </div>
    </div>
    </div>
    </div>
    </div>
    <div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 46px;"></div>
    <div class="CodeMirror-gutters" style="display: none; height: 46px;"></div>
    </div>
    </div>
    </pre>
    <p><span>The </span><code>/home</code><span> folder is shared across </span><code>arch</code><span>,
        </span><code>arch-head</code><span>, and the nodes. </span></p>
    <p><strong><span>To Use:</span></strong></p>
    <ol start=''>
        <li>
            <p><span>SSH into arch, SSH into </span><code>arch-head</code></p>
        </li>
        <li>
            <p><span>Use </span><code>qsub</code><span> to submit jobs</span></p>
            <p>💡<span> </span><mark><span>Look up information on PBS and Torque for how to use the job
                        queue</span></mark></p>
        </li>
        <li>
            <p><span>SSH into notes (</span><code>c01-0</code><span> to </span><code>c44-0</code><span>)</span></p>
        </li>
    </ol>
    <p>&nbsp;</p>
    <h3><a name="notes-n667" class="md-header-anchor"></a><span>Notes</span></h3>
    <h4><a name="tlb---translation-lookaside-buffer" class="md-header-anchor"></a><span>TLB -
        </span><strong><span>Translation Lookaside Buffer</span></strong></h4>
    <ul>
        <li><strong><span>Virtual Memory</span></strong><span> used to make the most of
            </span><strong><span>non-continguous</span></strong><span> main memory. A program may rely on continguous
                memory, which is possible virtually but not physically. </span></li>
        <li><span>Used as a special cache for </span><strong><span>Page Tables</span></strong><span> that record the
                translation between a </span><strong><span>Virtual Address</span></strong><span> used by a program to
                the </span><strong><span>Physical Address</span></strong><span> stored in the main memory.</span></li>
        <li><strong><span>Page Tables</span></strong><span> may be shared between multiple instances of the same
                software application in the case when it stores common functionality such as pre-compiled
                instructions.</span></li>
        <li><span>Should be accessed </span><strong><span>in conjunction</span></strong><span> with cache. This utilizes
                a </span><strong><span>virtually addressed, physically tagged</span></strong><span> cache structure.
                Look up items in the cache with a virtual address and check the tag against the TLB physical address to
                determine validity. </span></li>
    </ul>
    <h4><a name="scratchpad-memory" class="md-header-anchor"></a><span>Scratchpad Memory</span></h4>
    <ul>
        <li><span>Often used in GPUs.</span></li>
        <li><span>Allow programmer to explicitly store/evict items in cache.</span></li>
        <li><span>More </span><strong><span>flexible</span></strong><span> but incurs
            </span><strong><span>overhead</span></strong><span>.</span></li>
    </ul>
    <h4><a name="shared-memory" class="md-header-anchor"></a><span>Shared Memory</span></h4>
    <ul>
        <li><span>One alternative is to communicate through explicitly passing messages to all the processors,
            </span><strong><span>message-passing</span></strong><span>, that&#39;s more scalable.</span></li>
        <li><span>Shared memory use </span><strong><span>load and stores</span></strong><span> to pass information and
                is less scalable. </span></li>
        <li><strong><span>Memory Consistency Model</span></strong><span> specifies the ordering of updates to different
                locations</span></li>
        <li><strong><span>Cache Coherence</span></strong><span> ensures updates to a single location by a thread is
                visible to all other threads on other cores.</span></li>
    </ul>
    <p>&nbsp;</p>
    <h3><a name="status-report---may-21" class="md-header-anchor"></a><span>Status Report - May 21</span></h3>
    <p><strong><span>This Week</span></strong><span>:</span></p>
    <ul>
        <li>
            <p><span>More reading about graphics and ray tracing (the digital versions of all the textbooks are free
                    from the UBC library)</span></p>
        </li>
        <li>
            <p><span>Read about the Turing RT core in the NVIDIA whitepaper and some of their blog posts. I couldn&#39;t
                    find much information, just 2 main points:</span></p>
            <ul>
                <li><span>Each RT core has a BVH traversal accelerator and a separate triangle intersection accelerator
                        (does not handle BVH building/refitting)</span></li>
                <li><span>The memory path redesign (merging L1 with shared memory) results in higher L1 cache bandwidth
                        to speed up ray/triangle data access from the RT core</span></li>
            </ul>
        </li>
        <li>
            <p><span>Reading a 2020 NVIDIA patent about a &quot;traversal coprocessor&quot; that I&#39;m assuming is (or
                    is similar to) the RT core. It has more details on the hardware components. </span></p>
            <p><img src="C:\Users\lucyl\AppData\Roaming\Typora\typora-user-images\image-20200521171759687.png"
                    referrerpolicy="no-referrer" alt="image-20200521171759687"></p>
        </li>
    </ul>
    <p><strong><span>Next Week:</span></strong></p>
    <ul>
        <li><span>Determine high level components required to model RT core and consider how they can be implemented in
                gpgpu-sim</span></li>
    </ul>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <h2><a name="ray-tracing-meeting-2---may-22" class="md-header-anchor"></a><span>Ray Tracing Meeting #2 - May
            22</span></h2>
    <p><strong><span>Notes:</span></strong></p>
    <ul>
        <li>
            <p><span>Modelling off of patents is still very vague, many assumptions, but useful to cite</span></p>
            <p>💡<span> </span><mark><span>Note sections that are extra vague</span></mark></p>
        </li>
        <li>
            <p><span>Patents are useful even if they aren&#39;t approved </span></p>
        </li>
        <li>
            <p><span>Intel Embree kernels can be used to build BVH trees (this is what Francois did in his
                    thesis)</span></p>
            <ul>
                <li>
                    <p><span>Embree source code is available on Github</span></p>
                    <p>💡<span> </span><mark><span>Look into Embree code</span></mark></p>
                </li>
                <li>
                    <p><span>Embree can be incorporated into gpgpu-sim like a driver. Have BVH building function calls
                            routed through Embree.</span></p>
                    <ul>
                        <li>
                            <p><span>Example of how </span><code>cuda runtime api</code><span> was developed:</span></p>
                            <ol start=''>
                                <li><span>Version 0: Add all function prototypes to header file; have every function
                                        assert an error</span></li>
                                <li><span>Version 1: Run through the program and write actual functions for each
                                        assertion error that appears</span></li>
                            </ol>
                        </li>
                        <li>
                            <p><span>Will probably be passing in </span><code>struct</code><span>s </span></p>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Vulkan API for ray tracing is new. Open sourced </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> beneficial for research purposes</span>
            </p>
            <ul>
                <li>
                    <p><span>Vulkan API is quite low level, lots of parameters that can be specified</span></p>
                    <p>💡<span> </span><mark><span>Look into what Vulkan API is like and where it fits in</span></mark>
                    </p>
                </li>
                <li>
                    <p><span>Vulkan BVH calls have many parameters (5?) and should invoke various Intel Embree
                            calls</span></p>
                </li>
                <li>
                    <p><span>Vulkan RT tutorial is available</span></p>
                    <blockquote>
                        <p><a href='https://github.com/GPSnoopy/RayTracingInVulkan' target='_blank'
                                class='url'>https://github.com/GPSnoopy/RayTracingInVulkan</a></p>
                    </blockquote>
                </li>
            </ul>
        </li>
    </ul>
    <p><strong><span>Tasks</span></strong></p>
    <ul>
        <li>
            <p><span>Define submodules and specific tasks </span></p>
            <p>💡<span> </span><mark><span>Draw overall system diagram of the project (i.e. gpgpu-sim, RT core, Emerald,
                        RTAO, Vulkan, Mesa, gem5, etc.)</span></mark></p>
        </li>
        <li>
            <p><span>Meeting soon with Ayub on Emerald tutorial</span></p>
            <p>💡<span> </span><mark><span>Look at Emerald code</span></mark></p>
        </li>
    </ul>
    <p>&nbsp;</p>
    <h3><a name="ptx-memory-consistency" class="md-header-anchor"></a><span>PTX Memory Consistency</span></h3>
    <blockquote>
        <p><a href='https://dl.acm.org/doi/pdf/10.1145/3297858.3304043' target='_blank'
                class='url'>https://dl.acm.org/doi/pdf/10.1145/3297858.3304043</a></p>
    </blockquote>
    <p><span>Formally describes how memory consistency is setup in PTX (with formal definitions and axioms)</span></p>
    <p>💡<span> </span><mark><span>Look into the difference between the hardware model vs. the memory model of a
                GPU</span></mark></p>
    <p><strong><span>The Idea of Memory Consistency</span></strong></p>
    <ul>
        <li>
            <p><span>Strict memory consistency is favourable and leads to more deterministic code but at great expense
                    to the performance</span></p>
        </li>
        <li>
            <p><span>Load/Store instructions have tags to specify whether they have to be consistent and the level that
                    they must be consistent on.</span></p>
            <ul>
                <li><code>.relaxed</code><span>, </span><code>.release</code><span>, </span><code>.sc</code><span>,
                        etc.</span></li>
                <li><code>.cta</code><span>, </span><code>.gpu</code><span>, </span><code>.sys</code></li>
            </ul>
        </li>
        <li>
            <p><span>Threads in GPUs are not inherently synchronous. Consider the following SIMT deadlock example on two
                    threads attempting an atomic at the same location at the same time:</span></p>
            <div class="md-diagram-panel"><svg height="404.125" version="1.1" width="566.609375"
                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                    style="overflow: hidden; position: relative; left: -0.806261px; top: -0.494312px; zoom: 0.927623; max-width: 100%; height: auto;"
                    viewBox="0 0 566.609375 404.117">
                    <desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.2.0</desc>
                    <defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block"
                            style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                        <marker id="raphael-marker-endblock55-obju46iy" markerHeight="5" markerWidth="5" orient="auto"
                            refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                            <use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)"
                                stroke-width="1.0000" fill="currentColor" stroke="none"
                                style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use>
                        </marker>
                        <marker id="raphael-marker-endblock55-obj6k4x5" markerHeight="5" markerWidth="5" orient="auto"
                            refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                            <use xlink:href="#raphael-marker-block" transform="rotate(180 2.5 2.5) scale(1,1)"
                                stroke-width="1.0000" fill="currentColor" stroke="none"
                                style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use>
                        </marker>
                    </defs>
                    <rect x="10" y="20" width="96.8125" height="38.015625" rx="0" ry="0" fill="var(--bg-color)"
                        stroke="currentColor" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                    </rect>
                    <rect x="20" y="30" width="76.8125" height="18.015625" rx="0" ry="0" fill="none" stroke="none"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="58.40625" y="39.0078125"
                        text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px" stroke="none"
                        fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Thread 1</tspan>
                    </text>
                    <rect x="10" y="346.109375" width="96.8125" height="38.015625" rx="0" ry="0" fill="var(--bg-color)"
                        stroke="currentColor" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                    </rect>
                    <rect x="20" y="356.109375" width="76.8125" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="58.40625"
                        y="365.1171875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px"
                        stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Thread 1</tspan>
                    </text>
                    <path fill="var(--bg-color)" stroke="currentColor" d="M58.40625,58.015625L58.40625,346.109375"
                        stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    <rect x="328.796875" y="20" width="96.8125" height="38.015625" rx="0" ry="0" fill="var(--bg-color)"
                        stroke="currentColor" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
                    </rect>
                    <rect x="338.796875" y="30" width="76.8125" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="377.203125"
                        y="39.0078125" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px"
                        stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Thread 2</tspan>
                    </text>
                    <rect x="328.796875" y="346.109375" width="96.8125" height="38.015625" rx="0" ry="0"
                        fill="var(--bg-color)" stroke="currentColor" stroke-width="2"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect>
                    <rect x="338.796875" y="356.109375" width="76.8125" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="377.203125"
                        y="365.1171875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px"
                        stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Thread 2</tspan>
                    </text>
                    <path fill="var(--bg-color)" stroke="currentColor" d="M377.203125,58.015625L377.203125,346.109375"
                        stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    <rect x="48.40625" y="78.015625" width="338.796875" height="28.015625" rx="0" ry="0"
                        fill="var(--bg-color)" stroke="currentColor" stroke-width="2"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect>
                    <rect x="160.203125" y="83.015625" width="115.203125" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text
                        x="217.8046875" y="92.0234375" text-anchor="middle" font-family="Andale Mono, monospace"
                        font-size="16px" stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Request Lock</tspan>
                    </text>
                    <rect x="24.59375" y="126.03125" width="67.625" height="28.015625" rx="0" ry="0"
                        fill="var(--bg-color)" stroke="currentColor" stroke-width="2"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect>
                    <rect x="29.59375" y="131.03125" width="57.625" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="58.40625"
                        y="140.0390625" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px"
                        stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Locked</tspan>
                    </text>
                    <rect x="276.203125" y="174.046875" width="202" height="28.015625" rx="0" ry="0"
                        fill="var(--bg-color)" stroke="currentColor" stroke-width="2"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect>
                    <rect x="281.203125" y="179.046875" width="192" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="377.203125"
                        y="188.0546875" text-anchor="middle" font-family="Andale Mono, monospace" font-size="16px"
                        stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Poll + Wait for Lock
                        </tspan>
                    </text>
                    <rect x="67.8125" y="218.046875" width="298.78125" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text
                        x="217.8046875" y="227.0625" text-anchor="middle" font-family="Andale Mono, monospace"
                        font-size="16px" stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.1953125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Waiting for Thread
                            2 to Execute</tspan>
                    </text>
                    <path fill="var(--bg-color)" stroke="currentColor"
                        d="M58.40625,240.078125C58.40625,240.078125,331.6377818584442,240.078125,372.195587368682,240.078125"
                        stroke-width="2" marker-end="url(#raphael-marker-endblock55-obju46iy)" stroke-dasharray="none"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    <rect x="87.015625" y="256.0625" width="260.390625" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text
                        x="217.8046875" y="265.078125" text-anchor="middle" font-family="Andale Mono, monospace"
                        font-size="16px" stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.1953125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Waiting for Lock to
                            be Free</tspan>
                    </text>
                    <path fill="var(--bg-color)" stroke="currentColor"
                        d="M377.203125,278.09375C377.203125,278.09375,103.97159314155579,278.09375,63.41378763131797,278.09375"
                        stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj6k4x5)" stroke-dasharray="none"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    <rect x="48.40625" y="298.09375" width="338.796875" height="28.015625" rx="0" ry="0"
                        fill="var(--bg-color)" stroke="currentColor" stroke-width="2"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect>
                    <rect x="169.796875" y="303.09375" width="96.015625" height="18.015625" rx="0" ry="0" fill="none"
                        stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text
                        x="217.8046875" y="312.1015625" text-anchor="middle" font-family="Andale Mono, monospace"
                        font-size="16px" stroke="none" fill="currentColor"
                        style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-family: &quot;Andale Mono&quot;, monospace; font-size: 16px;">
                        <tspan dy="4.203125" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Deadlocked</tspan>
                    </text>
                </svg></div>
        </li>
        <li>
            <p><span>Data Races occur when there are non-locked writes. The actual race varies depending on the
                    consistency model.</span></p>
        </li>
    </ul>
    <p><strong><span>Synchronization Primitives</span></strong></p>
    <figure>
        <table>
            <thead>
                <tr>
                    <th><span>Primitive</span></th>
                    <th><span>Details</span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>.fence</code></td>
                    <td><span>Fencing off memory access</span></td>
                </tr>
                <tr>
                    <td><code>.bar</code></td>
                    <td><span>Synchronization</span></td>
                </tr>
                <tr>
                    <td><code>.atom</code></td>
                    <td><span>Atomic</span></td>
                </tr>
                <tr>
                    <td><code>.red</code></td>
                    <td><span>Reduction</span></td>
                </tr>
                <tr>
                    <td><code>.membar</code></td>
                    <td><span>Fencing off memory access (old)</span></td>
                </tr>
            </tbody>
        </table>
    </figure>
    <p>&nbsp;</p>
    <p><strong><span>Consistency Principles</span></strong></p>
    <ul>
        <li><strong><span>Causality Order</span></strong><span> relates to synchronizations</span></li>
        <li><strong><span>Program Order</span></strong><span> relates to order of instructions within a single
                thread</span></li>
        <li><strong><span>Coherence Order</span></strong><span> relates to the order of various writes (i.e. which one
                will be the final saved write)</span></li>
        <li><strong><span>Communication Order</span></strong><span> relates to the order of read and writes (i.e. what
                value will be read, before or after write)</span></li>
    </ul>
    <p>💡<mark><span>Look into moral operations and the Litmus Test</span></mark></p>
    <p>&nbsp;</p>
    <h2><a name="meeting-3---may-22" class="md-header-anchor"></a><span>Meeting #3 - May 22</span></h2>
    <p><strong><span>Status</span></strong><span>:</span></p>
    <ul>
        <li>
            <p><span>Read the introduction and a little bit more of both the textbooks</span></p>
            <ul>
                <li><span>Shaders</span></li>
                <li><span>How bounding boxes work (kd-tree, BVH, Surface Area Heuristics)</span></li>
            </ul>
        </li>
        <li>
            <p><span>Looked briefly at gpgpu-sim code but decided it would be more useful to get a better handle on what
                    the RT core is</span></p>
        </li>
        <li>
            <p><span>General understanding of RT core modelling</span></p>
            <ul>
                <li><span>Model stacks </span></li>
                <li><span>Model increased L1 bandwidth</span></li>
                <li><span>Model L0 cache</span></li>
                <li><span>Model inputs/outputs</span></li>
                <li><span>Model the BVH pipeline</span></li>
            </ul>
            <p>💡<span> </span><mark><span>Figure out what CUDA calls are associated?</span></mark></p>
        </li>
        <li>
            <p><span>cpen 411 (sort of done? I just checked that I got the idea. For example, just did a few
                    forwarding)</span></p>
        </li>
    </ul>
    <p><strong><span>Questions:</span></strong></p>
    <ul>
        <li><span>Model both functionally and timing? How to model timing? (i.e. how to know how many cycles a triangle
                intersection takes?)</span></li>
        <li><span>Functionally check against boundaries and timing, I think the pbrt book has some implementations that
                are probably useful?</span></li>
        <li><span>Functionally routing through the different pipeline blocks</span></li>
        <li><span>How to do the timing model? </span></li>
    </ul>
    <p><strong><span>Notes</span></strong><span>:</span></p>
    <ul>
        <li>
            <p><span>gpgpu-sim has a generic pipeline that is used for the ALU and can be adapted to other blocks.
                    There&#39;s a parameter for figuring out how many cycles each pipeline stage requires</span></p>
            <ul>
                <li><span>For the RT core, likely most time is spent dealing with memory, and computations can be
                        assumed to be ~1 cycle</span></li>
                <li><span>Focus more on the memory management unit and how to dereference the BVH pointers</span></li>
            </ul>
        </li>
        <li>
            <p><span>The last feature to be added functionally was the tensor core, added by Negar + Aamir.</span></p>
            <p>💡<span> </span><mark><span>Read their tensor core paper and look at their code, + arrange meeting with
                        them to go over some important details</span></mark></p>
        </li>
        <li>
            <p><span>The functional simulation is embedded in the performance simulator and they are not separate
                    entities (in general)</span></p>
            <ul>
                <li><code>SYMCAT(OP, _IMPL)</code><span> expands out to multiple lines of C code that models the
                        functionality</span></li>
                <li><code>pI-&gt;uid</code><span> is a useful parameter for debugging. Use this to track a problematic
                        parameter throughout its execution</span></li>
            </ul>
        </li>
        <li>
            <p><span>Other cpen411 labs of interest: cache and branching</span></p>
            <ul>
                <li>
                    <p><span>Cache: </span></p>
                    <p><span>There is a standalone cache simulator. The cache model does not model the data, since all
                            that matter is hit/miss.</span></p>
                </li>
                <li>
                    <p><span>Branching:</span></p>
                    <p><span>Some important (albeit old) ideas on how simulators can model performance without all the
                            details. </span></p>
                </li>
            </ul>
            <p>💡<span> </span><mark><span>Get cache and branching labs from Tor</span></mark></p>
            <p><span>Possibly (in the future) have some workshops with Tor and other grad students to go over what
                    computer architecture is in his opinion.</span></p>
            <p>&nbsp;</p>
        </li>
    </ul>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <h3><a name="vulkan-notes" class="md-header-anchor"></a><span>Vulkan Notes</span></h3>
    <p><span>Vulkan is an API that now includes functionality for ray tracing. There is a Vulkan extension from NVIDIA
            to utilize the RT cores called </span><code>VK_NV_ray_tracing</code></p>
    <p><span>The commands in this extension are:</span></p>
    <ul>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkBindAccelerationStructureMemoryNV'><span>vkBindAccelerationStructureMemoryNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCmdBuildAccelerationStructureNV'><span>vkCmdBuildAccelerationStructureNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCmdCopyAccelerationStructureNV'><span>vkCmdCopyAccelerationStructureNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCmdTraceRaysNV'><span>vkCmdTraceRaysNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCmdWriteAccelerationStructuresPropertiesNV'><span>vkCmdWriteAccelerationStructuresPropertiesNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCompileDeferredNV'><span>vkCompileDeferredNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCreateAccelerationStructureNV'><span>vkCreateAccelerationStructureNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkCreateRayTracingPipelinesNV'><span>vkCreateRayTracingPipelinesNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkDestroyAccelerationStructureNV'><span>vkDestroyAccelerationStructureNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkGetAccelerationStructureHandleNV'><span>vkGetAccelerationStructureHandleNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkGetAccelerationStructureMemoryRequirementsNV'><span>vkGetAccelerationStructureMemoryRequirementsNV</span></a>
        </li>
        <li><a
                href='https://www.khronos.org/registry/vulkan/specs/1.1-extensions/html/vkspec.html#vkGetRayTracingShaderGroupHandlesNV'><span>vkGetRayTracingShaderGroupHandlesNV</span></a>
        </li>
    </ul>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <h1><a name="plan" class="md-header-anchor"></a><span>Plan</span></h1>
    <ul>
        <li>
            <p><span>Functional Model</span></p>
            <ul>
                <li>
                    <p><span>Treelet traversal loop</span></p>
                    <ul>
                        <li>
                            <p><span>Traversal</span></p>
                            <ul>
                                <li><span>Depth-first traversal</span></li>
                            </ul>
                        </li>
                        <li>
                            <p><span>Box intersections</span></p>
                            <ul>
                                <li><span>Tests children only, not the node itself</span></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <p><span>Triangle intersection calculations</span></p>
                    <ul>
                        <li>
                            <p><span>Ray rotations (from world space to object space)</span></p>
                            <ul>
                                <li><mark><span>Implement matrix transformation</span></mark></li>
                            </ul>
                        </li>
                        <li>
                            <p><span>Triangle Intersections</span></p>
                            <ul>
                                <li>
                                    <p><mark><span>Implement hit/miss test + return all triangle IDs and point on ray
                                                where it hit</span></mark><span> </span></p>
                                </li>
                                <li>
                                    <p><span>Continue traversal with shortened ray if triangle is not opaque</span></p>
                                </li>
                                <li>
                                    <p><span>Results queue</span></p>
                                    <ul>
                                        <li><span>Compare opaque triangle depth</span></li>
                                        <li><span>If results queue is full, return to SM and start new ray </span></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Verification (Functional)</span></p>
        </li>
        <li>
            <p><span>Timing Model</span></p>
            <ul>
                <li>
                    <p><mark><span>Implement pipeline stages</span></mark></p>
                </li>
                <li>
                    <p><span>Pushing/Popping Stack Management Unit</span></p>
                    <ul>
                        <li><span>Bounding boxes hit push children nodes to stack</span></li>
                        <li><span>Work is complete if the stack is empty</span></li>
                    </ul>
                </li>
                <li>
                    <p><span>Ray Management Unit</span></p>
                    <ul>
                        <li><span>Store current ray information (from SM and from triangle intersections)</span></li>
                        <li><span>Issue ray to triangle test and box test</span></li>
                        <li><span>Issues request to memory for next node/triangle</span></li>
                    </ul>
                </li>
                <li>
                    <p><span>L0 cache </span></p>
                    <ul>
                        <li>
                            <p><mark><span>Determine appropriate L0 size (relative to complet/primative)</span></mark>
                            </p>
                            <ul>
                                <li><span>A node should be the size of an L1 cache line</span></li>
                                <li><span>Child nodes preferred to be contiguous in memory</span></li>
                            </ul>
                        </li>
                        <li>
                            <p><span>Primitive cache</span></p>
                        </li>
                        <li>
                            <p><span>Complet (compressed treelet) cache</span></p>
                        </li>
                        <li>
                            <p><span>temporal coherence</span></p>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Interface</span></p>
            <ul>
                <li>
                    <p><span>OptiX/Vulkan</span></p>
                    <ul>
                        <li><span>Specific API calls utilizes the RT core</span></li>
                        <li><mark><span>Determine how this fits in with CUDA/PTX</span></mark></li>
                    </ul>
                </li>
                <li>
                    <p><span>Interface to SM</span></p>
                    <ul>
                        <li>
                            <p><span>Input from SM</span></p>
                            <ul>
                                <li><span>Ray probe (origin, direction, length)</span></li>
                                <li><span>Identify BVH structure to test</span></li>
                                <li><span>Short Stack of traversal state</span></li>
                                <li><span>Configuration (return all hits or just first hit)</span></li>
                            </ul>
                        </li>
                        <li>
                            <p><span>Results register</span></p>
                            <ul>
                                <li><span>SM register file</span></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>
                    <p><span>L1 Cache</span></p>
                    <ul>
                        <li><span>Dedicated read interface</span></li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    <p>&nbsp;</p>
    <p><span>Actions of RT Core</span></p>
    <ul>
        <li><span>Traverse tree</span></li>
        <li><span>Perform intersections</span></li>
        <li><span>Check for visibility for opaque triangles</span></li>
        <li><span>Shorten ray after hitting opaque triangle</span></li>
        <li><span>Fetch information from memory to L0</span></li>
        <li><span>Rotate ray to object space</span></li>
    </ul>
    <p><span>Actions of SM</span></p>
    <ul>
        <li><span>Provide ray</span></li>
        <li><span>Determine what to do with transparent triangles</span></li>
        <li><span>Access texture</span></li>
        <li><span>Provide short stack</span></li>
        <li><span>Choose between closest hit or any hit</span></li>
        <li><span>Rotate object to world space</span></li>
    </ul>
    <h2><a name="status-report---may-28" class="md-header-anchor"></a><span>Status Report - May 28</span></h2>
    <p><strong><span>This Week:</span></strong></p>
    <ul>
        <li>
            <p><span>Made list of items for modelling RT cores in gpgpu-sim with some notes + questions (I&#39;m not
                    sure if this is a &quot;plan&quot;)</span></p>
            <p><a href='https://docs.google.com/document/d/18W0XmQUSIDmR_o0CF43XI_2kKpiz-0HXvNdYF-thvP4/edit?usp=sharing'
                    target='_blank'
                    class='url'>https://docs.google.com/document/d/18W0XmQUSIDmR_o0CF43XI_2kKpiz-0HXvNdYF-thvP4/edit?usp=sharing</a>
            </p>
        </li>
        <li>
            <p><span>Read more about graphics and ray tracing</span></p>
        </li>
        <li>
            <p><span>Watched a few ISCA videos</span></p>
        </li>
    </ul>
    <p><strong><span>Next Week</span></strong><span>:</span></p>
    <ul>
        <li><span>&quot;Attend&quot; ISCA</span></li>
        <li><span>Read more about RT cores to fill in some gaps (I realized there are many NVIDIA patents that discuss
                the &quot;tree traversal unit&quot;)</span></li>
        <li><span>Start modelling the RT cores (I&#39;m still a little lost on the best place to start)</span></li>
    </ul>
    <p>&nbsp;</p>
    <p>💡<mark><span>Run a short program with CUDA on gpgpu-sim and figure out wtf is going on</span></mark></p>
    <h2><a name="huawei-meeting---may-28" class="md-header-anchor"></a><span>Huawei Meeting - May 28</span></h2>
    <ul>
        <li>
            <p><span>Emerald uses gem5-gpu (which combined CPU and GPU) with other elements to to model a mobile
                    SoC</span></p>
            <ul>
                <li><span>gem5-gpu </span><em><span>should</span></em><span> be able to run CUDA code</span></li>
            </ul>
        </li>
        <li>
            <p>💡<span> </span><mark><span>gpgpu-sim new release for ISCA 2020; should probably read</span></mark></p>
        </li>
        <li>
            <p>💡<mark><span>what is Mesa??</span></mark></p>
            <ul>
                <li><span>Runs GPU workloads on CPU</span></li>
                <li><span>Mesa will probably eventually support Vulkan but not yet</span></li>
                <li><span>Vulkan support can be easily added through Mesa since Emerald uses Mesa</span></li>
            </ul>
        </li>
        <li>
            <p><span>Ideally create our own API for interacting with the simulator</span></p>
            <ul>
                <li>
                    <p><span>Get ideas for what functions will be necessary from Vulkan</span></p>
                </li>
                <li>
                    <p><span>Probably implement &quot;magic instructions&quot;</span></p>
                    <ul>
                        <li><span>what are the inputs</span></li>
                        <li><span>what are the functions</span></li>
                    </ul>
                </li>
                <li>
                    <p>💡<span> </span><mark><span>Find Francois&#39;s ambient occlusion RTAO code since it runs on a
                                GPU and extract the necessary functions that would run through the RT core</span></mark>
                    </p>
                </li>
            </ul>
        </li>
        <li>
            <p><span>For the timing model:</span></p>
            <ul>
                <li><span>essentially implement a memory management system</span></li>
                <li><span>related to a TLB (I still don&#39;t understand this)</span></li>
                <li><span>add optimizations on top of the MMU base (i.e. the L0 cache which would make it faster)</span>
                </li>
                <li>💡<span> </span><mark><span>Ask Tor about what this means because I was thinking about it as pushing
                            the data around between the stacks and pipeline stages to get the timing?</span></mark></li>
                <li>💡<span> </span><mark><span>Look at how gpgpu-sim models this timing for memory reads?</span></mark>
                </li>
            </ul>
        </li>
        <li>
            <p><span>Longer term goals</span></p>
            <ul>
                <li><span>Major problem in ray tracing the the problem of divergence</span></li>
                <li><span>Potentially explore improving Francois&#39;s accelerator</span></li>
            </ul>
        </li>
        <li>
            <p><span>Tasks from Huawei</span></p>
            <ul>
                <li><span>Want to implement an L1 cache inside each ray tracing accelerating core to hold BVH node data.
                        What would the ideal L1 cache size be? </span></li>
                <li><span>Tommy to sweep L1 cache sizes</span></li>
            </ul>
            <p><a href='https://www.scratchapixel.com/index.php?redirect' target='_blank'
                    class='url'>https://www.scratchapixel.com/index.php?redirect</a></p>
            <p>&nbsp;</p>
        </li>
    </ul>
    <p><img src="C:\Users\lucyl\AppData\Roaming\Typora\typora-user-images\image-20200529124229332.png"
            referrerpolicy="no-referrer" alt="image-20200529124229332"></p>
    <p><img src="C:\Users\lucyl\AppData\Roaming\Typora\typora-user-images\image-20200529124248004.png"
            referrerpolicy="no-referrer" alt="image-20200529124248004"></p>
    <h2><a name="meeting-4---may-29" class="md-header-anchor"></a><span>Meeting #4 - May 29</span></h2>
    <p><strong><span>Questions:</span></strong></p>
    <ul>
        <li>
            <p><span>Clarify &quot;tasks&quot;</span></p>
            <ol start=''>
                <li>
                    <p><span>Vulkan</span></p>
                    <ul>
                        <li><span>Tommy confirmed it is in Mesa and I checked and the commands are in the list</span>
                        </li>
                        <li><span>How does this fit in with CUDA? Is it completely separate? Just create a little
                                snippit that traces a ray? </span></li>
                        <li><span>How does this fit in with gpgpu-sim</span></li>
                        <li><span>SPIR-V vs. GLSL machine code? </span></li>
                    </ul>
                </li>
                <li>
                    <p><span>Memory Management Unit</span></p>
                    <ul>
                        <li><span>Is it not like moving it around inside? or is this for moving it around outside?
                            </span></li>
                        <li><span>In that case how?? New class that just sends requests for memory? </span></li>
                        <li><span>Use a &quot;magic function&quot;? So not a pre-existing piece of CUDA code... just a
                                gpgpu-sim configuration? </span></li>
                    </ul>
                </li>
            </ol>
        </li>
        <li>
            <p><span>CPEN411 branching</span></p>
        </li>
        <li>
            <p><span>logistics</span></p>
        </li>
        <li>
            <p><span>ISCA</span></p>
        </li>
    </ul>
    <p><strong><span>Notes:</span></strong></p>
    <ul>
        <li>
            <p><span>Potentially start going over CPEN 411 slides with Tor next week</span></p>
        </li>
        <li>
            <p>💡<span> </span><mark><span>Read Ayub&#39;s PhD thesis</span></mark></p>
        </li>
        <li>
            <p><span>Goal: Merge new Mesa into Emerald (otherwise use CUDA)</span></p>
            <ul>
                <li>
                    <p><span>Learn about git</span></p>
                </li>
                <li>
                    <p><span>The idea is to merge Mesa into Emerald </span></p>
                    <ol start=''>
                        <li><span>ensure existing functionality still works (run some existing traces)</span></li>
                        <li><span>start adding in missing ray tracing things</span></li>
                    </ol>
                </li>
                <li>
                    <p><span>i.e. in CUDA, first step was making </span><code>template.cu</code><span> work. This is the
                            simplest program and gives a good starting point to check the functionality of everything
                            else</span></p>
                </li>
            </ul>
        </li>
        <li>
            <p>💡<span> </span><mark><span>Try to run a mini ray tracing program through Mesa to determine if the
                        functionality is there or not</span></mark></p>
        </li>
        <li>
            <p><span>Learn about Agile hardware</span></p>
            <ul>
                <li>💡<span> </span><mark><span>Read about &quot;Tracer Bullet&quot; in the </span><em><span>Pragmatic
                                Programmer</span></em></mark><span> </span>✅</li>
                <li><span>This is better than the previous waterfall method that&#39;s still used by hardware
                        designers</span></li>
            </ul>
        </li>
        <li>
            <p><span>Interesting note: the PhD thesis on Game Theory was only 25 pages long??</span></p>
        </li>
    </ul>
    <p>&nbsp;</p>
    <h2><a name="emerald-n1210" class="md-header-anchor"></a><span>Emerald</span></h2>
    <p><a href='https://github.com/gem5-graphics' target='_blank' class='url'>https://github.com/gem5-graphics</a></p>
    <p><strong><span>CUDA</span></strong></p>
    <ol start=''>
        <li>
            <p><span>Emerald full version uses </span><strong><span>gem5-gpu</span></strong></p>
            <ul>
                <li>
                    <p><span>Compile benchmarks from </span><code>benchmarks/libcuda</code><span> </span></p>
                </li>
                <li>
                    <p><span>Inside the code for </span></p>
                    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded"
                        lang="c++"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 7.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">cudaError_t</span> <span class="cm-variable">CUDARTAPI</span> <span class="cm-variable">cudaMallocHelper</span></span></pre>
                    </div>
                    </div>
                    </div>
                    </div>
                    </div>
                    </div>
                    <div
                        style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 23px;">
                    </div>
                    <div class="CodeMirror-gutters" style="display: none; height: 23px;"></div>
                    </div>
                    </div>
                    </pre>
                </li>
                <li>
                    <p><span>Creates an instance of </span><code>m5_gpu</code><span> that holds the parameters of a CUDA
                            call as a magic instruction</span></p>
                </li>
                <li>
                    <p><span>The magic instruction is defined in </span><code>m50op.h</code><span> and varies by
                            hardware configuration (i.e. ARM, x86)</span></p>
                </li>
                <li>
                    <p><span>When gem5 hits this magic instruction, it will call to gpgpu-sim and the original cuda call
                            is unpacked</span></p>
                </li>
            </ul>
            <p><span>cuda </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> libcuda </span><span class="MathJax_SVG"
                    tabindex="-1" style="font-size: 100%; display: inline-block;"><svg
                        xmlns:xlink="http://www.w3.org/1999/xlink" width="2.323ex" height="1.644ex"
                        viewBox="0 -605.1 1000 707.6" role="img" focusable="false" style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> gem5 </span><span class="MathJax_SVG" tabindex="-1"
                    style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="2.323ex" height="1.644ex" viewBox="0 -605.1 1000 707.6" role="img" focusable="false"
                        style="vertical-align: -0.238ex;">
                        <defs>
                            <path stroke-width="0" id="E16-MJMAIN-2192"
                                d="M56 237T56 250T70 270H835Q719 357 692 493Q692 494 692 496T691 499Q691 511 708 511H711Q720 511 723 510T729 506T732 497T735 481T743 456Q765 389 816 336T935 261Q944 258 944 250Q944 244 939 241T915 231T877 212Q836 186 806 152T761 85T740 35T732 4Q730 -6 727 -8T711 -11Q691 -11 691 0Q691 7 696 25Q728 151 835 230H70Q56 237 56 250Z">
                            </path>
                        </defs>
                        <g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)">
                            <use xlink:href="#E16-MJMAIN-2192" x="0" y="0"></use>
                        </g>
                    </svg></span>
                <script type="math/tex">\rightarrow</script><span> gpgpu-sim</span>
            </p>
        </li>
        <li>
            <p><code>lipopencl/m5op.h</code><span> defines the GPU function. </span></p>
            <ul>
                <li><code>gpgpu_func</code><span> is the array that holds all the possible CUDA instructions</span></li>
                <li><span>Translates to a machine instruction code (</span><code>0x5c</code><span>)</span></li>
            </ul>
        </li>
        <li>
            <p><code>gem5/src/sim/pseudo_inst.cc</code><span> is how this is implemented? </span></p>
            <ul>
                <li><code>void gpu(...)</code><span> decides on CUDA vs graphics</span></li>
            </ul>
        </li>
    </ol>
    <p><strong><span>Mesa</span></strong></p>
    <ul>
        <li>
            <p><code>mesa_gpgpusim</code><span> glues OpenGL to gpgpu-sim</span></p>
        </li>
        <li>
            <p><span>also look at </span><code>mesa_calls.cc</code></p>
        </li>
        <li>
            <p><span>The OpenGL trace is converted to PTX using a combination of API trace, Mesa, and custom Emerald
                    code</span></p>
        </li>
        <li>
            <p><span>Anything to do with gpgpu-sim translation can be grepped for inside the
                </span><code>mesa/src</code><span> folder for any </span><code>gpgpusim*</code><span> function
                    calls</span></p>
        </li>
        <li>
            <p><span>This is implemented in a &quot;softpipe&quot; which is a software pipeline for graphics</span></p>
        </li>
        <li>
            <p><code>mesa/src/gallium/driver/softpipe</code><span> essentially uses a &quot;fake&quot; virtual software
                    driver for Mesa instead of the usual hardware drivers</span></p>
        </li>
        <li>
            <p><span>Mesa compiles code to </span><strong><span>TGSI</span></strong><span> which is then translated to
                    PTX in Emerald</span></p>
            <p>💡<span> </span><mark><span>Look into Mesa TGSI</span></mark></p>
        </li>
        <li>
            <p><span>PTX is used for compute only (assembly-like language associated with CUDA) and is very similar to
                    SASS which is the assembly-like language for graphics that existed before</span></p>
        </li>
    </ul>
    <p>&nbsp;</p>
    <h3><a name="mesa" class="md-header-anchor"></a><span>Mesa</span></h3>
    <p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Mesa_layers_of_crap_2014.svg/1920px-Mesa_layers_of_crap_2014.svg.png"
            referrerpolicy="no-referrer" alt="img"></p>
    <p><a href='https://gallium.readthedocs.io/en/latest/tgsi.html#instruction-set' target='_blank'
            class='url'>https://gallium.readthedocs.io/en/latest/tgsi.html#instruction-set</a></p>
    </div>
</body>

</html>